import "pkg:/source/utils/Types.bs"
import "pkg:/components/VideoPlayer/VideoUtils.bs"

' TODO:P0 support content nodes
' TODO:P0 support playlists
' TODO:P0 support queing without playing
' TODO:P0 support playing by inserting into the current index
function Init()
    m.top.queue = []
end function

function Enqueue(items as object) as void
    if IsArray(items)
        for each item in items
            Enqueue(item)
        end for
    else
        if not VideoUtils.IsVideoPlayerOpen()
            VideoUtils.PlayVideo(items)
            return
        end if
        queue = m.top.queue
        queue.push(items)
        m.top.queue = queue
    end if
end function

function Dequeue(unused as dynamic) as object
    queue = m.top.queue
    value = queue.Shift()
    m.top.queue = queue
    return value
end function

function Set(items as object)
    m.top.queue = IsArray(items) ? items : [items]
end function

function Clear(unused as dynamic)
    m.top.queue = []
end function
