var nn=Object.defineProperty;var ln=(i,e,t)=>e in i?nn(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var pe=(i,e,t)=>(ln(i,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(l){if(l.ep)return;l.ep=!0;const s=t(l);fetch(l.href,s)}})();function N(){}function qe(i,e){for(const t in e)i[t]=e[t];return i}function Jt(i){return i()}function tt(){return Object.create(null)}function oe(i){i.forEach(Jt)}function Ze(i){return typeof i=="function"}function J(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}let je;function Ge(i,e){return je||(je=document.createElement("a")),je.href=e,i===je.href}function sn(i){return Object.keys(i).length===0}function rn(i,...e){if(i==null){for(const n of e)n(void 0);return N}const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ze(i,e,t){i.$$.on_destroy.push(rn(e,t))}function d(i,e){i.appendChild(e)}function U(i,e,t){i.insertBefore(e,t||null)}function M(i){i.parentNode&&i.parentNode.removeChild(i)}function me(i,e){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(e)}function p(i){return document.createElement(i)}function G(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function O(i){return document.createTextNode(i)}function H(){return O(" ")}function he(){return O("")}function E(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function u(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function on(i){return i===""?null:+i}function cn(i){return Array.from(i.childNodes)}function K(i,e){e=""+e,i.data!==e&&(i.data=e)}function ae(i,e){i.value=e??""}function A(i,e,t,n){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,n?"important":"")}function nt(i,e,t){for(let n=0;n<i.options.length;n+=1){const l=i.options[n];if(l.__value===e){l.selected=!0;return}}(!t||e!==void 0)&&(i.selectedIndex=-1)}function fn(i){const e=i.querySelector(":checked");return e&&e.__value}function it(i,e){return new i(e)}let He;function Ie(i){He=i}function Yt(){if(!He)throw new Error("Function called outside component initialization");return He}function Me(i){Yt().$$.on_mount.push(i)}function un(i){Yt().$$.on_destroy.push(i)}const Ce=[],de=[];let Pe=[];const Ke=[],an=Promise.resolve();let xe=!1;function dn(){xe||(xe=!0,an.then(Wt))}function Ae(i){Pe.push(i)}function Ee(i){Ke.push(i)}const We=new Set;let Te=0;function Wt(){if(Te!==0)return;const i=He;do{try{for(;Te<Ce.length;){const e=Ce[Te];Te++,Ie(e),hn(e.$$)}}catch(e){throw Ce.length=0,Te=0,e}for(Ie(null),Ce.length=0,Te=0;de.length;)de.pop()();for(let e=0;e<Pe.length;e+=1){const t=Pe[e];We.has(t)||(We.add(t),t())}Pe.length=0}while(Ce.length);for(;Ke.length;)Ke.pop()();xe=!1,We.clear(),Ie(i)}function hn(i){if(i.fragment!==null){i.update(),oe(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(Ae)}}function mn(i){const e=[],t=[];Pe.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Pe=e}const Re=new Set;let we;function ie(){we={r:0,c:[],p:we}}function le(){we.r||oe(we.c),we=we.p}function C(i,e){i&&i.i&&(Re.delete(i),i.i(e))}function V(i,e,t,n){if(i&&i.o){if(Re.has(i))return;Re.add(i),we.c.push(()=>{Re.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}function $(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function De(i,e){const t={},n={},l={$$scope:1};let s=i.length;for(;s--;){const r=i[s],o=e[s];if(o){for(const f in r)f in o||(n[f]=1);for(const f in o)l[f]||(t[f]=o[f],l[f]=1);i[s]=o}else for(const f in r)l[f]=1}for(const r in n)r in t||(t[r]=void 0);return t}function Fe(i){return typeof i=="object"&&i!==null?i:{}}function Oe(i,e,t){const n=i.$$.props[e];n!==void 0&&(i.$$.bound[n]=t,t(i.$$.ctx[n]))}function F(i){i&&i.c()}function z(i,e,t){const{fragment:n,after_update:l}=i.$$;n&&n.m(e,t),Ae(()=>{const s=i.$$.on_mount.map(Jt).filter(Ze);i.$$.on_destroy?i.$$.on_destroy.push(...s):oe(s),i.$$.on_mount=[]}),l.forEach(Ae)}function D(i,e){const t=i.$$;t.fragment!==null&&(mn(t.after_update),oe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function gn(i,e){i.$$.dirty[0]===-1&&(Ce.push(i),dn(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function Y(i,e,t,n,l,s,r,o=[-1]){const f=He;Ie(i);const c=i.$$={fragment:null,ctx:[],props:s,update:N,not_equal:l,bound:tt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:tt(),dirty:o,skip_bound:!1,root:e.target||f.$$.root};r&&r(c.root);let a=!1;if(c.ctx=t?t(i,e.props||{},(h,m,...g)=>{const _=g.length?g[0]:m;return c.ctx&&l(c.ctx[h],c.ctx[h]=_)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](_),a&&gn(i,h)),m}):[],c.update(),a=!0,oe(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const h=cn(e.target);c.fragment&&c.fragment.l(h),h.forEach(M)}else c.fragment&&c.fragment.c();e.intro&&C(i.$$.fragment),z(i,e.target,e.anchor),Wt()}Ie(f)}class W{constructor(){pe(this,"$$");pe(this,"$$set")}$destroy(){D(this,1),this.$destroy=N}$on(e,t){if(!Ze(t))return N;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const l=n.indexOf(t);l!==-1&&n.splice(l,1)}}$set(e){this.$$set&&!sn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const pn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(pn);const lt="/assets/logo-dark-6c855293.svg",st="/assets/logo-light-cb4e8704.svg";function _n(i){let e,t,n,l,s,r,o,f;return{c(){e=G("svg"),t=G("defs"),n=G("clipPath"),l=G("circle"),s=G("g"),r=G("circle"),o=G("circle"),f=G("circle"),A(l,"display","inline"),A(l,"fill","red"),A(l,"stroke-width",".808149"),A(l,"stroke-linejoin","round"),u(l,"cx","99.697"),u(l,"cy","190.975"),u(l,"r","67.373"),u(n,"clipPathUnits","userSpaceOnUse"),u(n,"id","a"),A(r,"display","inline"),A(r,"fill","#000"),A(r,"stroke","none"),A(r,"stroke-width","1.2888"),A(r,"stroke-linejoin","round"),u(r,"cx","100.741"),u(r,"cy","110.005"),u(r,"r","95.258"),A(o,"display","inline"),A(o,"fill","#fff"),A(o,"stroke","none"),A(o,"stroke-width","1.2888"),A(o,"stroke-linejoin","round"),u(o,"cx","100.741"),u(o,"cy","110.005"),u(o,"r","95.258"),u(o,"clip-path","url(#a)"),A(f,"display","inline"),A(f,"fill","#fff"),A(f,"stroke","none"),A(f,"stroke-width",".907953"),A(f,"stroke-linejoin","round"),u(f,"cx","99.6"),u(f,"cy","85.809"),u(f,"r","38.136"),A(s,"display","inline"),u(s,"transform","translate(-5.483 -14.747)"),u(e,"viewBox","0 0 190.516 190.516"),u(e,"xml:space","preserve"),u(e,"xmlns","http://www.w3.org/2000/svg")},m(c,a){U(c,e,a),d(e,t),d(t,n),d(n,l),d(e,s),d(s,r),d(s,o),d(s,f)},p:N,i:N,o:N,d(c){c&&M(e)}}}class bn extends W{constructor(e){super(),Y(this,e,null,_n,J,{})}}function vn(){return new URLSearchParams(window.location.search).get("host")??window.location.host}const Z=class{static async getState(){return await(await fetch(`${Z.host()}/api/state`)).json()}static async getPreferencesFile(){return await(await fetch(`${Z.host()}/config/preferences.json`)).json()}static async getHomeLayoutFile(){return await(await fetch(`${Z.host()}/config/default_home_layout.json`)).json()}static async getInvidiousVideoApiFile(){return await(await fetch(`${Z.host()}/config/invidious_video_api.json`)).json()}static async invidiousAuthenticatedRequest(e){const t=Z.host()+"/invidious/authenticated-request?request-data="+encodeURIComponent(JSON.stringify(e));return await(await fetch(t)).json()}static async getUserPreferences(){return await(await fetch(`${Z.host()}/api/preferences`)).json()}static async saveUserPreference(e,t){return await await this.putJson(`${Z.host()}/api/preferences`,{[e]:t})}static async logout(){return await Z.postJson(`${Z.host()}/api/command`,{command:"logout"})}static async playVideo(e,t){if(!e)return;const n={command:"play",videoId:e};return t!==void 0&&(n.timestamp=t),await Z.postJson(`${Z.host()}/api/command`,n)}static async getSearchHistory(){return await(await fetch(`${Z.host()}/api/search-history`)).json()}static async putSearchHistory(e){return await(await Z.putJson(`${Z.host()}/api/search-history`,{query:e})).json()}static async clearSearchHistory(){return await fetch(`${Z.host()}/api/search-history`,{method:"DELETE"})}static async updateInstance(e){return await Z.putJson(`${Z.host()}/api/preferences`,{"invidious.instance":e})}static async setPlayletLibVersion(e){let t=null;e!==""&&(t=JSON.stringify([{link:`https://github.com/iBicha/playlet/releases/download/${e}/playlet-lib.zip`,type:"custom"}])),await this.postJson(`${Z.host()}/api/command`,{command:"set-playlet-lib-urls",content:t})}static postJson(e,t){return fetch(e,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)})}static putJson(e,t){return fetch(e,{headers:{"Content-Type":"application/json"},method:"PUT",body:JSON.stringify(t)})}};let X=Z;pe(X,"host",()=>`http://${vn()}`);const Le=[];function be(i,e=N){let t;const n=new Set;function l(o){if(J(i,o)&&(i=o,t)){const f=!Le.length;for(const c of n)c[1](),Le.push(c,i);if(f){for(let c=0;c<Le.length;c+=2)Le[c][0](Le[c+1]);Le.length=0}}}function s(o){l(o(i))}function r(o,f=N){const c=[o,f];return n.add(c),n.size===1&&(t=e(l,s)||N),o(i),()=>{n.delete(c),n.size===0&&t&&(t(),t=null)}}return{set:l,update:s,subscribe:r}}const _e=be({}),Qe=be({screen:"home"}),Ne=be("dark"),Gt=be([]),Je=be({}),Kt=be({}),xt=be([]),Be=be([]);function yn(i){let e,t,n,l,s,r,o,f,c;return{c(){e=p("div"),t=p("div"),t.textContent="☀️",n=H(),l=p("label"),s=p("input"),r=H(),o=p("div"),o.textContent="🌙",u(t,"class","p-2"),u(s,"type","checkbox"),u(s,"class","toggle toggle-sm p2"),u(l,"class","flex items-center"),u(o,"class","p-2"),u(e,"class","flex flex-row m-3")},m(a,h){U(a,e,h),d(e,t),d(e,n),d(e,l),d(l,s),s.checked=i[0],d(e,r),d(e,o),f||(c=[E(s,"change",i[2]),E(s,"change",i[1])],f=!0)},p(a,[h]){h&1&&(s.checked=a[0])},i:N,o:N,d(a){a&&M(e),f=!1,oe(c)}}}function wn(i,e,t){let n;Ne.subscribe(r=>{t(0,n=r==="dark"),document.documentElement.setAttribute("data-theme",r)}),Me(()=>{const r=localStorage.getItem("theme");r&&Ne.set(r)});function l(){const r=n?"dark":"light";localStorage.setItem("theme",r),Ne.set(r)}function s(){n=this.checked,t(0,n)}return[n,l,s]}class kn extends W{constructor(e){super(),Y(this,e,wn,yn,J,{})}}function rt(i){let e,t,n;return{c(){e=p("div"),t=p("span"),n=O(i[4]),u(e,"class","badge badge-outline")},m(l,s){U(l,e,s),d(e,t),d(t,n)},p(l,s){s&16&&K(n,l[4])},d(l){l&&M(e)}}}function Sn(i){let e,t,n,l,s,r;return{c(){e=p("li"),t=p("div"),n=p("button"),n.textContent="Login",u(t,"class","tooltip tooltip-left"),u(t,"data-tip",l=`Login using ${i[2]}`)},m(o,f){U(o,e,f),d(e,t),d(t,n),s||(r=E(n,"click",i[6]),s=!0)},p(o,f){f&4&&l!==(l=`Login using ${o[2]}`)&&u(t,"data-tip",l)},d(o){o&&M(e),s=!1,r()}}}function Tn(i){let e,t,n,l,s,r;return{c(){e=p("li"),t=p("div"),n=p("button"),n.textContent="Logout",u(t,"class","tooltip tooltip-left"),u(t,"data-tip",l=`Logout from ${i[3]}`)},m(o,f){U(o,e,f),d(e,t),d(t,n),s||(r=E(n,"click",i[7]),s=!0)},p(o,f){f&8&&l!==(l=`Logout from ${o[3]}`)&&u(t,"data-tip",l)},d(o){o&&M(e),s=!1,r()}}}function Ln(i){let e,t,n,l,s,r,o,f,c,a,h,m,g,_,y,b,k,j,S;a=new kn({});let L=i[1]&&i[4]&&rt(i);b=new bn({});function v(w,R){return w[1]?Tn:Sn}let P=v(i),I=P(i);return{c(){e=p("div"),t=p("div"),n=p("img"),s=H(),r=p("h4"),o=O(i[0]),f=H(),c=p("div"),F(a.$$.fragment),h=H(),L&&L.c(),m=H(),g=p("div"),_=p("div"),y=p("div"),F(b.$$.fragment),k=H(),j=p("ul"),I.c(),Ge(n.src,l=i[5]==="dark"?lt:st)||u(n,"src",l),u(n,"class","h-8"),u(n,"alt","Playlet Logo"),u(r,"class","label brightness-75"),u(t,"class","flex-1"),u(y,"class","w-8 rounded-full"),u(_,"tabindex","-1"),u(_,"class","btn btn-ghost btn-circle avatar"),u(j,"tabindex","-1"),u(j,"class","menu menu-sm dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box"),u(g,"class","dropdown dropdown-end"),u(c,"class","flex-none"),u(e,"class","navbar bg-base-100 sticky top-0 z-40")},m(w,R){U(w,e,R),d(e,t),d(t,n),d(t,s),d(t,r),d(r,o),d(e,f),d(e,c),z(a,c,null),d(c,h),L&&L.m(c,null),d(c,m),d(c,g),d(g,_),d(_,y),z(b,y,null),d(g,k),d(g,j),I.m(j,null),S=!0},p(w,[R]){(!S||R&32&&!Ge(n.src,l=w[5]==="dark"?lt:st))&&u(n,"src",l),(!S||R&1)&&K(o,w[0]),w[1]&&w[4]?L?L.p(w,R):(L=rt(w),L.c(),L.m(c,m)):L&&(L.d(1),L=null),P===(P=v(w))&&I?I.p(w,R):(I.d(1),I=P(w),I&&(I.c(),I.m(j,null)))},i(w){S||(C(a.$$.fragment,w),C(b.$$.fragment,w),S=!0)},o(w){V(a.$$.fragment,w),V(b.$$.fragment,w),S=!1},d(w){w&&M(e),D(a),L&&L.d(),D(b),I.d()}}}function Cn(i,e,t){let n;ze(i,Ne,m=>t(5,n=m));let l,s=!1,r,o,f,c;return _e.subscribe(m=>{var g,_,y,b,k,j,S,L,v;t(0,l=((g=m==null?void 0:m.app)==null?void 0:g.lib_version)??""),((_=m==null?void 0:m.app)==null?void 0:_.id)==="dev"&&t(0,l+="-dev"),((y=m==null?void 0:m.app)==null?void 0:y.lib_url_type)==="custom"&&((b=m==null?void 0:m.app)==null?void 0:b.lib_url)==="https://github.com/iBicha/playlet/releases/download/unstable/playlet-lib.zip"&&t(0,l+="-unstable"),t(1,s=(k=m==null?void 0:m.invidious)==null?void 0:k.logged_in),r=(j=m==null?void 0:m.invidious)==null?void 0:j.auth_url,t(2,o=(S=m==null?void 0:m.invidious)==null?void 0:S.current_instance),t(3,f=(L=m==null?void 0:m.invidious)==null?void 0:L.logged_in_instance),t(4,c=(v=m==null?void 0:m.invidious)==null?void 0:v.logged_in_username)}),[l,s,o,f,c,n,()=>{if(!r){alert("Error with login, please refresh the page.");return}window.location=r},async()=>{await X.logout(),X.getState().then(m=>{_e.set(m)})}]}class Pn extends W{constructor(e){super(),Y(this,e,Cn,Ln,J,{})}}function In(i){let e,t,n;return{c(){e=G("svg"),t=G("g"),n=G("path"),u(n,"d","M4,10V21h6V15h4v6h6V10L12,3Z"),u(t,"class","fill-current"),u(e,"version","1.1"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),u(e,"x","0px"),u(e,"y","0px"),u(e,"viewBox","0 0 24 24"),u(e,"preserveAspectRatio","xMidYMid meet"),u(e,"focusable","false"),A(e,"pointer-events","none"),A(e,"display","block"),A(e,"width","100%"),A(e,"height","100%")},m(l,s){U(l,e,s),d(e,t),d(t,n)},p:N,i:N,o:N,d(l){l&&M(e)}}}class Hn extends W{constructor(e){super(),Y(this,e,null,In,J,{})}}function Mn(i){let e,t,n;return{c(){e=G("svg"),t=G("g"),n=G("path"),u(n,"d","M61.44,9.23c-1.85,0-3.64,0.08-5.35,0.25c-1.71,0.17-3.44,0.42-5.17,0.77c-1.72,0.34-3.39,0.77-5,1.26 c-1.59,0.49-3.16,1.07-4.7,1.72l-0.1,0.05l0,0c-1.63,0.7-3.18,1.45-4.67,2.25c-1.5,0.81-2.94,1.68-4.31,2.6 c-1.38,0.93-2.72,1.92-3.99,2.97c-1.27,1.05-2.5,2.16-3.68,3.35l-0.04,0.04c-1.18,1.18-2.29,2.4-3.33,3.66 c-1.05,1.28-2.04,2.61-2.97,3.99c-0.92,1.36-1.78,2.8-2.59,4.3c-0.8,1.49-1.56,3.05-2.26,4.67l-0.05,0.11l0,0l-0.07,0.14 c-0.63,1.5-1.19,3.04-1.67,4.61c-0.49,1.59-0.9,3.23-1.24,4.93c-0.35,1.73-0.6,3.45-0.77,5.17c-0.17,1.72-0.25,3.5-0.25,5.35 c0,1.85,0.08,3.64,0.25,5.35c0.17,1.71,0.42,3.44,0.77,5.17c0.35,1.72,0.77,3.39,1.27,5c0.49,1.57,1.05,3.13,1.7,4.66 c0.04,0.07,0.07,0.14,0.1,0.21c0.69,1.6,1.43,3.13,2.23,4.6c0.81,1.5,1.68,2.94,2.59,4.3c0.93,1.39,1.92,2.72,2.98,4 c1.02,1.24,2.11,2.44,3.26,3.59c0.07,0.06,0.13,0.12,0.19,0.19c1.16,1.16,2.36,2.24,3.59,3.26c1.28,1.05,2.61,2.04,3.99,2.97 c1.36,0.92,2.8,1.78,4.3,2.59c1.49,0.8,3.05,1.56,4.67,2.26l0.21,0.1c1.52,0.64,3.07,1.2,4.67,1.69c1.58,0.49,3.23,0.9,4.92,1.24 c1.73,0.35,3.45,0.6,5.17,0.77c1.72,0.17,3.5,0.25,5.35,0.25c1.85,0,3.64-0.08,5.35-0.25c1.71-0.17,3.44-0.42,5.17-0.77 c1.72-0.35,3.39-0.77,5-1.27c1.59-0.49,3.16-1.07,4.71-1.73l0.09-0.04l0-0.01c1.63-0.7,3.18-1.45,4.67-2.25 c1.5-0.81,2.94-1.68,4.31-2.6c1.38-0.93,2.72-1.92,3.99-2.97c1.25-1.03,2.45-2.12,3.62-3.29c0.06-0.06,0.11-0.12,0.18-0.18 c1.15-1.15,2.23-2.35,3.25-3.58c1.05-1.28,2.05-2.61,2.98-4c0.92-1.36,1.78-2.8,2.59-4.3c0.8-1.49,1.56-3.04,2.26-4.67l0.1-0.22 c0.64-1.51,1.2-3.06,1.69-4.65c0.49-1.59,0.9-3.23,1.24-4.93c0.35-1.73,0.6-3.45,0.77-5.17c0.17-1.72,0.25-3.5,0.25-5.35 c0-1.85-0.08-3.64-0.25-5.35c-0.17-1.71-0.42-3.44-0.77-5.17c-0.35-1.72-0.77-3.39-1.27-5c-0.49-1.59-1.07-3.16-1.73-4.71 l-0.04-0.09l0,0c-0.7-1.63-1.45-3.18-2.25-4.67c-0.81-1.5-1.68-2.94-2.59-4.3c-0.93-1.38-1.92-2.72-2.97-3.99 c-1.02-1.24-2.12-2.45-3.28-3.61c-0.07-0.06-0.13-0.12-0.18-0.18c-1.16-1.16-2.35-2.24-3.59-3.26c-1.28-1.05-2.61-2.04-3.99-2.97 c-1.37-0.92-2.8-1.78-4.3-2.59c-1.49-0.8-3.04-1.56-4.67-2.25l-0.19-0.09c-1.52-0.64-3.08-1.21-4.68-1.7 c-1.58-0.49-3.23-0.9-4.93-1.24c-1.73-0.35-3.45-0.6-5.17-0.77C65.08,9.31,63.29,9.23,61.44,9.23L61.44,9.23z M63.34,31.17 c2.19,0,3.91,0.63,5.16,1.88c1.24,1.25,1.87,2.96,1.87,5.17c0,2.24-1.07,4.22-3.21,5.97c-2.16,1.74-4.66,2.62-7.52,2.62 c-2.14,0-3.85-0.6-5.16-1.8c-1.31-1.22-1.96-2.79-1.96-4.75c0-2.47,1.07-4.59,3.19-6.4C57.82,32.06,60.37,31.17,63.34,31.17 L63.34,31.17L63.34,31.17z M75.55,91.71H47.33v-4.75h5.3V57.95h-5.3v-3.78h13.19c3.33,0,6.61-0.4,9.85-1.22v34.01h5.18L75.55,91.71 L75.55,91.71L75.55,91.71z M49.12,1.2c1.96-0.39,3.99-0.69,6.08-0.89C57.29,0.1,59.37,0,61.44,0c2.07,0,4.15,0.1,6.24,0.31 c2.09,0.2,4.12,0.5,6.08,0.89c1.94,0.39,3.88,0.88,5.82,1.48c1.88,0.58,3.74,1.26,5.58,2.04l0.19,0.07l0,0l0.06,0.02 c1.85,0.8,3.65,1.67,5.38,2.61c1.71,0.93,3.4,1.95,5.07,3.07c1.63,1.1,3.21,2.27,4.73,3.52c1.52,1.25,2.97,2.56,4.34,3.95 c1.38,1.38,2.7,2.83,3.95,4.34c1.25,1.52,2.42,3.09,3.52,4.73c1.09,1.63,2.11,3.32,3.06,5.06l0,0l0.01,0 c0.94,1.74,1.82,3.54,2.61,5.39c0.02,0.05,0.04,0.1,0.06,0.15c0.78,1.83,1.46,3.7,2.05,5.6c0.61,1.96,1.11,3.92,1.5,5.89 c0.39,1.96,0.69,3.99,0.89,6.08c0.2,2.09,0.3,4.17,0.3,6.24c0,2.07-0.1,4.15-0.31,6.24c-0.2,2.09-0.5,4.12-0.89,6.08 c-0.39,1.94-0.88,3.88-1.48,5.82c-0.58,1.89-1.27,3.76-2.05,5.62l-0.04,0.09l0,0l-0.05,0.11c-0.8,1.85-1.67,3.65-2.61,5.38 c-0.93,1.71-1.95,3.4-3.07,5.07c-1.1,1.63-2.27,3.21-3.52,4.73c-1.25,1.52-2.56,2.96-3.95,4.34c-1.38,1.38-2.83,2.7-4.35,3.95 c-1.52,1.25-3.09,2.42-4.72,3.51c-1.63,1.09-3.32,2.11-5.06,3.06c-1.78,0.96-3.57,1.84-5.39,2.62c-0.05,0.02-0.1,0.04-0.16,0.06 c-1.83,0.78-3.7,1.46-5.6,2.05c-1.96,0.61-3.92,1.11-5.88,1.5c-1.96,0.39-3.99,0.69-6.08,0.89c-2.09,0.2-4.17,0.3-6.24,0.3 s-4.15-0.1-6.24-0.3c-2.09-0.2-4.12-0.5-6.08-0.89c-1.94-0.39-3.88-0.88-5.82-1.48c-1.89-0.58-3.76-1.27-5.61-2.05l-0.2-0.08l0,0 c-1.85-0.8-3.65-1.67-5.38-2.61c-1.71-0.93-3.4-1.95-5.07-3.07c-1.63-1.09-3.21-2.27-4.72-3.51c-1.52-1.25-2.97-2.57-4.35-3.95 c-1.38-1.38-2.7-2.83-3.95-4.34c-1.25-1.52-2.42-3.1-3.52-4.73c-1.09-1.63-2.11-3.32-3.06-5.06c-0.97-1.78-1.84-3.58-2.62-5.4 c-0.02-0.05-0.04-0.1-0.06-0.15c-0.78-1.83-1.46-3.7-2.05-5.6c-0.61-1.96-1.11-3.93-1.5-5.89c-0.39-1.96-0.69-3.99-0.89-6.08 C0.1,65.59,0,63.51,0,61.44c0-2.07,0.1-4.15,0.31-6.24c0.2-2.09,0.5-4.12,0.89-6.08c0.39-1.94,0.88-3.88,1.48-5.82 c0.58-1.88,1.26-3.74,2.04-5.59l0.09-0.23l0,0c0.8-1.85,1.67-3.65,2.61-5.38c0.93-1.71,1.95-3.4,3.07-5.07 c1.1-1.63,2.27-3.21,3.52-4.73c1.25-1.52,2.56-2.96,3.95-4.34c1.38-1.38,2.83-2.7,4.34-3.95c1.52-1.25,3.09-2.42,4.73-3.52 c1.67-1.12,3.36-2.14,5.07-3.07l0.13-0.06c1.73-0.94,3.48-1.78,5.26-2.55c0.05-0.02,0.1-0.04,0.15-0.06 c1.83-0.78,3.7-1.46,5.6-2.05C45.19,2.09,47.15,1.59,49.12,1.2L49.12,1.2z"),u(t,"class","fill-current"),u(e,"version","1.1"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),u(e,"x","0px"),u(e,"y","0px"),u(e,"viewBox","0 0 122.88 122.88"),u(e,"preserveAspectRatio","xMidYMid meet"),u(e,"focusable","false"),A(e,"pointer-events","none"),A(e,"display","block"),A(e,"width","100%"),A(e,"height","100%")},m(l,s){U(l,e,s),d(e,t),d(t,n)},p:N,i:N,o:N,d(l){l&&M(e)}}}class Un extends W{constructor(e){super(),Y(this,e,null,Mn,J,{})}}function jn(i){let e,t,n;return{c(){e=G("svg"),t=G("g"),n=G("path"),u(n,"d","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"),u(t,"class","fill-current"),u(e,"version","1.1"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),u(e,"x","0px"),u(e,"y","0px"),u(e,"viewBox","0 0 512 512"),u(e,"preserveAspectRatio","xMidYMid meet"),u(e,"focusable","false"),A(e,"pointer-events","none"),A(e,"display","block"),A(e,"width","100%"),A(e,"height","100%")},m(l,s){U(l,e,s),d(e,t),d(t,n)},p:N,i:N,o:N,d(l){l&&M(e)}}}class Vn extends W{constructor(e){super(),Y(this,e,null,jn,J,{})}}function Rn(i){let e,t,n;return{c(){e=G("svg"),t=G("g"),n=G("path"),u(n,"d","M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,8c-2.21,0-4,1.79-4,4s1.79,4,4,4s4-1.79,4-4 S14.21,8,12,8L12,8z M13.22,3l0.55,2.2l0.13,0.51l0.5,0.18c0.61,0.23,1.19,0.56,1.72,0.98l0.4,0.32l0.5-0.14l2.17-0.62l1.22,2.11 l-1.63,1.59l-0.37,0.36l0.08,0.51c0.05,0.32,0.08,0.64,0.08,0.98s-0.03,0.66-0.08,0.98l-0.08,0.51l0.37,0.36l1.63,1.59l-1.22,2.11 l-2.17-0.62l-0.5-0.14l-0.4,0.32c-0.53,0.43-1.11,0.76-1.72,0.98l-0.5,0.18l-0.13,0.51L13.22,21h-2.44l-0.55-2.2l-0.13-0.51 l-0.5-0.18C9,17.88,8.42,17.55,7.88,17.12l-0.4-0.32l-0.5,0.14l-2.17,0.62L3.6,15.44l1.63-1.59l0.37-0.36l-0.08-0.51 C5.47,12.66,5.44,12.33,5.44,12s0.03-0.66,0.08-0.98l0.08-0.51l-0.37-0.36L3.6,8.56l1.22-2.11l2.17,0.62l0.5,0.14l0.4-0.32 C8.42,6.45,9,6.12,9.61,5.9l0.5-0.18l0.13-0.51L10.78,3H13.22 M14,2h-4L9.26,4.96c-0.73,0.27-1.4,0.66-2,1.14L4.34,5.27l-2,3.46 l2.19,2.13C4.47,11.23,4.44,11.61,4.44,12s0.03,0.77,0.09,1.14l-2.19,2.13l2,3.46l2.92-0.83c0.6,0.48,1.27,0.87,2,1.14L10,22h4 l0.74-2.96c0.73-0.27,1.4-0.66,2-1.14l2.92,0.83l2-3.46l-2.19-2.13c0.06-0.37,0.09-0.75,0.09-1.14s-0.03-0.77-0.09-1.14l2.19-2.13 l-2-3.46L16.74,6.1c-0.6-0.48-1.27-0.87-2-1.14L14,2L14,2z"),u(t,"class","fill-current"),u(e,"version","1.1"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),u(e,"x","0px"),u(e,"y","0px"),u(e,"viewBox","0 0 24 24"),u(e,"preserveAspectRatio","xMidYMid meet"),u(e,"focusable","false"),A(e,"pointer-events","none"),A(e,"display","block"),A(e,"width","100%"),A(e,"height","100%")},m(l,s){U(l,e,s),d(e,t),d(t,n)},p:N,i:N,o:N,d(l){l&&M(e)}}}class Nn extends W{constructor(e){super(),Y(this,e,null,Rn,J,{})}}function An(i){let e,t,n,l,s,r,o,f,c,a,h,m,g,_,y,b,k,j,S,L,v,P,I;return l=new Vn({}),c=new Hn({}),_=new Nn({}),S=new Un({}),{c(){e=p("div"),t=p("button"),n=p("div"),F(l.$$.fragment),r=H(),o=p("button"),f=p("div"),F(c.$$.fragment),h=H(),m=p("button"),g=p("div"),F(_.$$.fragment),b=H(),k=p("button"),j=p("div"),F(S.$$.fragment),u(n,"class","h-6"),u(t,"class",s=i[0].screen==="search"?"active":""),u(f,"class","h-6"),u(o,"class",a=i[0].screen==="home"?"active":""),u(g,"class","h-6"),u(m,"class",y=i[0].screen==="settings"?"active":""),u(j,"class","h-6"),u(k,"class",L=i[0].screen==="info"?"active":""),u(e,"class","btm-nav")},m(w,R){U(w,e,R),d(e,t),d(t,n),z(l,n,null),d(e,r),d(e,o),d(o,f),z(c,f,null),d(e,h),d(e,m),d(m,g),z(_,g,null),d(e,b),d(e,k),d(k,j),z(S,j,null),v=!0,P||(I=[E(t,"click",i[2]),E(o,"click",i[3]),E(m,"click",i[4]),E(k,"click",i[5])],P=!0)},p(w,[R]){(!v||R&1&&s!==(s=w[0].screen==="search"?"active":""))&&u(t,"class",s),(!v||R&1&&a!==(a=w[0].screen==="home"?"active":""))&&u(o,"class",a),(!v||R&1&&y!==(y=w[0].screen==="settings"?"active":""))&&u(m,"class",y),(!v||R&1&&L!==(L=w[0].screen==="info"?"active":""))&&u(k,"class",L)},i(w){v||(C(l.$$.fragment,w),C(c.$$.fragment,w),C(_.$$.fragment,w),C(S.$$.fragment,w),v=!0)},o(w){V(l.$$.fragment,w),V(c.$$.fragment,w),V(_.$$.fragment,w),V(S.$$.fragment,w),v=!1},d(w){w&&M(e),D(l),D(c),D(_),D(S),P=!1,oe(I)}}}function En(i,e,t){let n;ze(i,Qe,c=>t(0,n=c));function l(c){Qe.update(a=>(a.screen=c,a))}return[n,l,()=>l("search"),()=>l("home"),()=>l("settings"),()=>l("info")]}class On extends W{constructor(e){super(),Y(this,e,En,An,J,{})}}class Xe{constructor(){pe(this,"instance");pe(this,"endpoints");pe(this,"isLoggedIn",!1);pe(this,"userCountryCode","US");pe(this,"responseHandlers");this.responseHandlers={DefaultHandler:(e,t)=>this.DefaultHandler(e,t),PlaylistHandler:(e,t)=>this.PlaylistHandler(e,t)}}async searchSuggestions(e){return await(await fetch(`${this.instance}/api/v1/search/suggestions?q=${encodeURIComponent(e)}&region=${this.userCountryCode}`)).json()}async search(e){return await(await fetch(`${this.instance}/api/v1/search?q=${encodeURIComponent(e)}&region=${this.userCountryCode}`)).json()}async getVideoMetadata(e){return await(await fetch(`${this.instance}/api/v1/videos/${e}`)).json()}async makeRequest(e){if(!e||!this.instance||!this.endpoints)return null;let t=this.endpoints[e.endpoint];if(!t)return null;let n=this.instance+t.url,l={},s={};if(t.authenticated)return this.isLoggedIn?await X.invidiousAuthenticatedRequest(e):null;if(t.queryParams!==void 0)for(let f in t.queryParams){let c=t.queryParams[f];c.default!==void 0&&(c.type==="string"?l[f]=c.default:c.type==="#ISO3166"&&(c.default==="GetUserCountryCode"?l[f]=this.userCountryCode:l[f]=c.default))}if(e.queryParams!==void 0&&(l={...l,...e.queryParams}),e.pathParams!==void 0)for(let f in e.pathParams)n=n.replace(`:${f}`,e.pathParams[f]);n=this.makeUrl(n,l);const r=await fetch(n,{headers:s});let o=t.responseHandler!==void 0?this.responseHandlers[t.responseHandler]:this.responseHandlers.DefaultHandler;return o?await o(e,r):null}async DefaultHandler(e,t){const n=await t.json();return[{title:e.title,videos:n}]}async PlaylistHandler(e,t){const n=await t.json();return[this.ProcessPlaylist(e,n)]}ProcessPlaylist(e,t){return{title:this.ProcessTemplate(e.title,t),videos:t.videos}}ProcessTemplate(e,t){let n=e;for(let l in t)n=n.replace(`%${l}%`,`${t[l]}`);return n}makeUrl(e,t){const n=new URL(e),l=new URLSearchParams(n.search);let s=new URLSearchParams({...Object.fromEntries(l),...t});return n.search=s.toString(),n.toString()}}function ot(i){let e;function t(s,r){return s[0]!==void 0?qn:Bn}let n=t(i),l=n(i);return{c(){l.c(),e=he()},m(s,r){l.m(s,r),U(s,e,r)},p(s,r){n===(n=t(s))&&l?l.p(s,r):(l.d(1),l=n(s),l&&(l.c(),l.m(e.parentNode,e)))},d(s){s&&M(e),l.d(s)}}}function Bn(i){let e;return{c(){e=p("span"),e.textContent="(Invalid time)",u(e,"class","label-text m-2 text-error")},m(t,n){U(t,e,n)},p:N,d(t){t&&M(e)}}}function qn(i){let e,t,n,l;return{c(){e=p("span"),t=O("("),n=O(i[0]),l=O("s)"),u(e,"class","label-text m-2")},m(s,r){U(s,e,r),d(e,t),d(e,n),d(e,l)},p(s,r){r&1&&K(n,s[0])},d(s){s&&M(e)}}}function ct(i){let e,t,n;return{c(){e=p("input"),u(e,"type","range"),u(e,"min","0"),u(e,"max",i[2]),u(e,"class","range range-xs range-primary")},m(l,s){U(l,e,s),ae(e,i[5]),t||(n=[E(e,"change",i[11]),E(e,"input",i[11]),E(e,"input",i[12])],t=!0)},p(l,s){s&4&&u(e,"max",l[2]),s&32&&ae(e,l[5])},d(l){l&&M(e),t=!1,oe(n)}}}function zn(i){let e,t,n,l,s,r,o,f,c,a,h,m,g,_=i[1]&&ot(i),y=i[2]&&i[1]&&ct(i);return{c(){e=p("div"),t=p("div"),n=p("label"),l=p("input"),s=H(),r=p("span"),r.textContent="Start at",o=H(),f=p("input"),a=H(),_&&_.c(),h=H(),y&&y.c(),u(l,"type","checkbox"),u(l,"class","checkbox"),u(r,"class","label-text m-2"),u(n,"class","label justify-start cursor-pointer"),f.disabled=c=!i[1],u(f,"class","input w-28"),u(f,"placeholder","0:00"),u(t,"class","flex flex-row items-center"),u(e,"class","form-control")},m(b,k){U(b,e,k),d(e,t),d(t,n),d(n,l),l.checked=i[1],d(n,s),d(n,r),d(t,o),d(t,f),i[7](f),ae(f,i[4]),d(t,a),_&&_.m(t,null),d(e,h),y&&y.m(e,null),m||(g=[E(l,"change",i[6]),E(f,"input",i[8]),E(f,"input",i[9]),E(f,"change",i[10])],m=!0)},p(b,[k]){k&2&&(l.checked=b[1]),k&2&&c!==(c=!b[1])&&(f.disabled=c),k&16&&f.value!==b[4]&&ae(f,b[4]),b[1]?_?_.p(b,k):(_=ot(b),_.c(),_.m(t,null)):_&&(_.d(1),_=null),b[2]&&b[1]?y?y.p(b,k):(y=ct(b),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},i:N,o:N,d(b){b&&M(e),i[7](null),_&&_.d(),y&&y.d(),m=!1,oe(g)}}}function ft(i){if(i==="")return 0;const e=/^((\d+):)?(\d{1,2}):(\d{1,2})$/.exec(i);if(e){const t=e[2]?parseInt(e[2]):0,n=parseInt(e[3]),l=parseInt(e[4]);if(n<60&&l<60)return t*3600+n*60+l}}function ut(i){if(i===void 0)return;const e=Math.floor(i/3600),t=Math.floor(i/60%60),n=i%60,l=n<10?`0${n}`:n.toString();let r=(t<10&&e>0?`0${t}`:t.toString())+":"+l;return e>0&&(r=e.toString()+":"+r),r}function Dn(i,e,t){let{checked:n=!1}=e,{lengthSeconds:l=void 0}=e,{timestamp:s=0}=e,r,o="",f=0;function c(){n=this.checked,t(1,n)}function a(b){de[b?"unshift":"push"](()=>{r=b,t(3,r)})}function h(){o=this.value,t(4,o),t(3,r),t(0,s)}const m=b=>{let k=ft(b.currentTarget.value);k!==void 0&&l&&(k=Math.min(k,l)),t(0,s=k)},g=b=>{t(4,o=ut(s)??"0:00"),t(0,s=ft(o))};function _(){f=on(this.value),t(5,f),t(0,s)}const y=b=>{t(0,s=b.currentTarget.value)};return i.$$set=b=>{"checked"in b&&t(1,n=b.checked),"lengthSeconds"in b&&t(2,l=b.lengthSeconds),"timestamp"in b&&t(0,s=b.timestamp)},i.$$.update=()=>{i.$$.dirty&9&&document.activeElement!==r&&t(4,o=ut(s)),i.$$.dirty&1&&t(5,f=s!==void 0?s:0)},[s,n,l,r,o,f,c,a,h,m,g,_,y]}class Qt extends W{constructor(e){super(),Y(this,e,Dn,zn,J,{checked:1,lengthSeconds:2,timestamp:0})}}function Fn(i){let e,t=at(i[3])+"",n;return{c(){e=p("div"),n=O(t),u(e,"class","absolute bottom-2 right-0 bg-black/70 text-white text-sm rounded-sm pt-1 pb-1 pr-2 pl-2")},m(l,s){U(l,e,s),d(e,n)},p(l,s){s[0]&8&&t!==(t=at(l[3])+"")&&K(n,t)},d(l){l&&M(e)}}}function Jn(i){let e;return{c(){e=p("div"),e.textContent="LIVE",u(e,"class","absolute bottom-2 right-0 bg-red-500 text-white text-sm rounded-sm font-bold pt-1 pb-1 pr-2 pl-2")},m(t,n){U(t,e,n)},p:N,d(t){t&&M(e)}}}function Yn(i){let e,t,n,l,s,r,o,f,c,a,h,m,g,_,y,b,k,j,S,L,v,P,I,w,R,q,ce,x,ne,ve,ke,fe,ye,ge,B,ee,T,Q,ue,$e;function et(te,se){if(o==null&&(o=!!te[10]()),o)return Jn;if(te[3])return Fn}let Se=et(i),re=Se&&Se(i);function en(te){i[30](te)}function tn(te){i[31](te)}let Ye={lengthSeconds:i[3]};return i[6]!==void 0&&(Ye.checked=i[6]),i[7]!==void 0&&(Ye.timestamp=i[7]),w=new Qt({props:Ye}),de.push(()=>Oe(w,"checked",en)),de.push(()=>Oe(w,"timestamp",tn)),{c(){e=p("button"),t=p("div"),n=p("figure"),l=p("img"),r=H(),re&&re.c(),f=H(),c=p("div"),a=p("h3"),h=O(i[0]),m=H(),g=p("div"),_=O(i[2]),y=H(),b=p("div"),b.textContent=`${i[8]()}`,k=H(),j=p("dialog"),S=p("form"),L=p("h3"),v=O(i[0]),P=H(),I=p("div"),F(w.$$.fragment),ce=H(),x=p("button"),ne=O("Play on "),ve=O(i[5]),ke=H(),fe=p("button"),fe.textContent="Open in Invidious",ye=H(),ge=p("button"),ge.textContent="Cancel",B=H(),ee=p("form"),ee.innerHTML="<button>close</button>",u(l,"class","w-full rounded-box aspect-video object-cover"),u(l,"loading","lazy"),u(l,"width","320"),u(l,"height","180"),Ge(l.src,s=i[9]())||u(l,"src",s),u(l,"alt",i[0]),u(n,"class","relative"),u(a,"class","card-title text-base line-clamp-2 min-h-12"),u(g,"class","font-semibold"),u(c,"class","card-body"),u(t,"class","card card-compact bg-base-100 shadow-xl border border-neutral"),u(e,"class","w-80 p-2"),u(L,"class","text-lg m-5"),u(x,"class","btn m-2"),u(fe,"class","btn m-2"),u(ge,"class","btn m-2"),u(I,"class","flex flex-col"),u(S,"method","dialog"),u(S,"class","modal-box bg-base-100"),u(ee,"method","dialog"),u(ee,"class","modal-backdrop"),u(j,"id",T="modal_"+i[1]),u(j,"class","modal")},m(te,se){U(te,e,se),d(e,t),d(t,n),d(n,l),d(n,r),re&&re.m(n,null),d(t,f),d(t,c),d(c,a),d(a,h),d(c,m),d(c,g),d(g,_),d(c,y),d(c,b),U(te,k,se),U(te,j,se),d(j,S),d(S,L),d(L,v),d(S,P),d(S,I),z(w,I,null),d(I,ce),d(I,x),d(x,ne),d(x,ve),d(I,ke),d(I,fe),d(I,ye),d(I,ge),d(j,B),d(j,ee),i[32](j),Q=!0,ue||($e=[E(e,"click",function(){Ze(i[4].showModal())&&i[4].showModal().apply(this,arguments)}),E(x,"click",i[11]),E(fe,"click",i[12])],ue=!0)},p(te,se){i=te,(!Q||se[0]&1)&&u(l,"alt",i[0]),Se===(Se=et(i))&&re?re.p(i,se):(re&&re.d(1),re=Se&&Se(i),re&&(re.c(),re.m(n,null))),(!Q||se[0]&1)&&K(h,i[0]),(!Q||se[0]&4)&&K(_,i[2]),(!Q||se[0]&1)&&K(v,i[0]);const Ue={};se[0]&8&&(Ue.lengthSeconds=i[3]),!R&&se[0]&64&&(R=!0,Ue.checked=i[6],Ee(()=>R=!1)),!q&&se[0]&128&&(q=!0,Ue.timestamp=i[7],Ee(()=>q=!1)),w.$set(Ue),(!Q||se[0]&32)&&K(ve,i[5]),(!Q||se[0]&2&&T!==(T="modal_"+i[1]))&&u(j,"id",T)},i(te){Q||(C(w.$$.fragment,te),Q=!0)},o(te){V(w.$$.fragment,te),Q=!1},d(te){te&&(M(e),M(k),M(j)),re&&re.d(),D(w),i[32](null),ue=!1,oe($e)}}}function Wn(i){if(i==="invalid")return"N/A";const e=Math.floor(Date.now()/1e3);let t=i-e;if(t<=0)return"now";if(t<60){let n=`${t} second`;return t>1&&(n+="s"),n}if(t=t/60,t<60){t=Math.floor(t);let n=`${t} minute`;return t>1&&(n+="s"),n}if(t=t/60,t<24){t=Math.floor(t);let n=`${t} hour`;return t>1&&(n+="s"),n}else{t=t/24,t=Math.floor(t);let n=`${t} day`;return t>1&&(n+="s"),n}}function Gn(i){return isNaN(i)?"":i<1e3?`${Ve(i)} views`:(i=i/1e3,i<1e3?`${Ve(i)}K views`:(i=i/1e3,i<1e3?`${Ve(i)}M views`:(i=i/1e3,`${Ve(i)}B views`)))}function Ve(i){return i=i*10,i=i+.5,i=Math.floor(i),i=i/10,i}function at(i){const e=Math.floor(i/3600),t=Math.floor(i/60%60),n=i%60,l=n<10?`0${n}`:n.toString();let r=(t<10&&e>0?`0${t}`:t.toString())+":"+l;return e>0&&(r=e.toString()+":"+r),r}function Kn(i,e,t){let{title:n=void 0}=e,{videoId:l=void 0}=e,{author:s=void 0}=e,{videoThumbnails:r=void 0}=e,{viewCount:o=void 0}=e,{publishedText:f=void 0}=e,{isUpcoming:c=void 0}=e,{premiereTimestamp:a=void 0}=e,{lengthSeconds:h=void 0}=e,{liveNow:m=void 0}=e,{type:g=void 0}=e,{authorId:_=void 0}=e,{authorUrl:y=void 0}=e,{authorVerified:b=void 0}=e,{description:k=void 0}=e,{descriptionHtml:j=void 0}=e,{viewCountText:S=void 0}=e,{published:L=void 0}=e,{premium:v=void 0}=e,{index:P=void 0}=e,{indexId:I=void 0}=e,w,R="Roku TV",q,ce,x;_e.subscribe(T=>{var Q,ue;t(5,R=((Q=T==null?void 0:T.device)==null?void 0:Q.friendly_name)??"Roku TV"),q=(ue=T==null?void 0:T.invidious)==null?void 0:ue.current_instance});function ne(){if(c)return`Premeres in ${Wn(a)}`;const T=f||"",Q=Gn(o);return T===""&&Q===""?"":`${T} • ${Q}`}function ve(T="medium"){return!r||r.length===0?"":(r.find(ue=>ue.quality===T)||r[0]).url}function ke(){return m?!0:h===0&&o===0}async function fe(){await X.playVideo(l,x)}function ye(){let T=`${q}/watch?v=${l}`;ce&&x&&(T+=`&t=${x}`),window.open(T)}function ge(T){ce=T,t(6,ce)}function B(T){x=T,t(7,x)}function ee(T){de[T?"unshift":"push"](()=>{w=T,t(4,w)})}return i.$$set=T=>{"title"in T&&t(0,n=T.title),"videoId"in T&&t(1,l=T.videoId),"author"in T&&t(2,s=T.author),"videoThumbnails"in T&&t(13,r=T.videoThumbnails),"viewCount"in T&&t(14,o=T.viewCount),"publishedText"in T&&t(15,f=T.publishedText),"isUpcoming"in T&&t(16,c=T.isUpcoming),"premiereTimestamp"in T&&t(17,a=T.premiereTimestamp),"lengthSeconds"in T&&t(3,h=T.lengthSeconds),"liveNow"in T&&t(18,m=T.liveNow),"type"in T&&t(19,g=T.type),"authorId"in T&&t(20,_=T.authorId),"authorUrl"in T&&t(21,y=T.authorUrl),"authorVerified"in T&&t(22,b=T.authorVerified),"description"in T&&t(23,k=T.description),"descriptionHtml"in T&&t(24,j=T.descriptionHtml),"viewCountText"in T&&t(25,S=T.viewCountText),"published"in T&&t(26,L=T.published),"premium"in T&&t(27,v=T.premium),"index"in T&&t(28,P=T.index),"indexId"in T&&t(29,I=T.indexId)},[n,l,s,h,w,R,ce,x,ne,ve,ke,fe,ye,r,o,f,c,a,m,g,_,y,b,k,j,S,L,v,P,I,ge,B,ee]}class Zt extends W{constructor(e){super(),Y(this,e,Kn,Yn,J,{title:0,videoId:1,author:2,videoThumbnails:13,viewCount:14,publishedText:15,isUpcoming:16,premiereTimestamp:17,lengthSeconds:3,liveNow:18,type:19,authorId:20,authorUrl:21,authorVerified:22,description:23,descriptionHtml:24,viewCountText:25,published:26,premium:27,index:28,indexId:29},null,[-1,-1])}}function dt(i,e,t){const n=i.slice();return n[13]=e[t],n[15]=t,n}function ht(i,e,t){const n=i.slice();return n[10]=e[t],n}function mt(i){let e,t,n,l,s;const r=[Qn,xn],o=[];function f(c,a){return a&1&&(e=null),e==null&&(e=!!Array.isArray(c[0])),e?0:c[0].title&&c[0].videos?1:-1}return~(t=f(i,-1))&&(n=o[t]=r[t](i)),{c(){n&&n.c(),l=he()},m(c,a){~t&&o[t].m(c,a),U(c,l,a),s=!0},p(c,a){let h=t;t=f(c,a),t===h?~t&&o[t].p(c,a):(n&&(ie(),V(o[h],1,1,()=>{o[h]=null}),le()),~t?(n=o[t],n?n.p(c,a):(n=o[t]=r[t](c),n.c()),C(n,1),n.m(l.parentNode,l)):n=null)},i(c){s||(C(n),s=!0)},o(c){V(n),s=!1},d(c){c&&M(l),~t&&o[t].d(c)}}}function xn(i){let e,t=i[0].title+"",n,l,s,r,o,f,c=$(i[0].videos),a=[];for(let m=0;m<c.length;m+=1)a[m]=pt(dt(i,c,m));const h=m=>V(a[m],1,1,()=>{a[m]=null});return{c(){e=p("div"),n=O(t),l=H(),s=p("div");for(let m=0;m<a.length;m+=1)a[m].c();u(e,"class","text-lg font-semibold m-4"),u(s,"class","carousel carousel-center rounded-box w-full space-x-4")},m(m,g){U(m,e,g),d(e,n),U(m,l,g),U(m,s,g);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(s,null);i[6](s),r=!0,o||(f=E(s,"scroll",i[4]),o=!0)},p(m,g){if((!r||g&1)&&t!==(t=m[0].title+"")&&K(n,t),g&13){c=$(m[0].videos);let _;for(_=0;_<c.length;_+=1){const y=dt(m,c,_);a[_]?(a[_].p(y,g),C(a[_],1)):(a[_]=pt(y),a[_].c(),C(a[_],1),a[_].m(s,null))}for(ie(),_=c.length;_<a.length;_+=1)h(_);le()}},i(m){if(!r){for(let g=0;g<c.length;g+=1)C(a[g]);r=!0}},o(m){a=a.filter(Boolean);for(let g=0;g<a.length;g+=1)V(a[g]);r=!1},d(m){m&&(M(e),M(l),M(s)),me(a,m),i[6](null),o=!1,f()}}}function Qn(i){let e,t,n=$(i[0]),l=[];for(let r=0;r<n.length;r+=1)l[r]=_t(ht(i,n,r));const s=r=>V(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=he()},m(r,o){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(r,o);U(r,e,o),t=!0},p(r,o){if(o&1){n=$(r[0]);let f;for(f=0;f<n.length;f+=1){const c=ht(r,n,f);l[f]?(l[f].p(c,o),C(l[f],1)):(l[f]=_t(c),l[f].c(),C(l[f],1),l[f].m(e.parentNode,e))}for(ie(),f=n.length;f<l.length;f+=1)s(f);le()}},i(r){if(!t){for(let o=0;o<n.length;o+=1)C(l[o]);t=!0}},o(r){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)V(l[o]);t=!1},d(r){r&&M(e),me(l,r)}}}function gt(i){let e,t;const n=[i[13]];let l={};for(let s=0;s<n.length;s+=1)l=qe(l,n[s]);return e=new Zt({props:l}),{c(){F(e.$$.fragment)},m(s,r){z(e,s,r),t=!0},p(s,r){const o=r&1?De(n,[Fe(s[13])]):{};e.$set(o)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function pt(i){let e,t,n,l=i[15]>=i[2]&&i[15]<=i[3]&&gt(i);return{c(){e=p("div"),l&&l.c(),t=H(),u(e,"class","carousel-item w-80 p-2")},m(s,r){U(s,e,r),l&&l.m(e,null),d(e,t),n=!0},p(s,r){s[15]>=s[2]&&s[15]<=s[3]?l?(l.p(s,r),r&12&&C(l,1)):(l=gt(s),l.c(),C(l,1),l.m(e,t)):l&&(ie(),V(l,1,1,()=>{l=null}),le())},i(s){n||(C(l),n=!0)},o(s){V(l),n=!1},d(s){s&&M(e),l&&l.d()}}}function _t(i){let e,t;return e=new Xt({props:{videoRowData:i[10]}}),{c(){F(e.$$.fragment)},m(n,l){z(e,n,l),t=!0},p(n,l){const s={};l&1&&(s.videoRowData=n[10]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Zn(i){let e,t,n=i[0]&&mt(i);return{c(){n&&n.c(),e=he()},m(l,s){n&&n.m(l,s),U(l,e,s),t=!0},p(l,[s]){l[0]?n?(n.p(l,s),s&1&&C(n,1)):(n=mt(l),n.c(),C(n,1),n.m(e.parentNode,e)):n&&(ie(),V(n,1,1,()=>{n=null}),le())},i(l){t||(C(n),t=!0)},o(l){V(n),t=!1},d(l){l&&M(e),n&&n.d(l)}}}function Xn(i,e,t){let{requestData:n=void 0}=e,{videoRowData:l=void 0}=e,s,r=0,o=0;const f=320+16*2;let c=new Xe;_e.subscribe(g=>{var _,y,b;c.instance=(_=g==null?void 0:g.invidious)==null?void 0:_.current_instance,c.userCountryCode=((y=g==null?void 0:g.device)==null?void 0:y.user_country_code)??"US",c.isLoggedIn=((b=g.invidious)==null?void 0:b.logged_in)??!1,a()}),Kt.subscribe(g=>{c.endpoints=g,a()});async function a(){const g=await c.makeRequest(n);g&&t(0,l=g)}function h(){const g=s.scrollLeft,_=s.clientWidth||window.innerWidth;t(2,r=Math.floor(g/f)-1),t(3,o=Math.ceil((g+_)/f)+1)}function m(g){de[g?"unshift":"push"](()=>{s=g,t(1,s)})}return i.$$set=g=>{"requestData"in g&&t(5,n=g.requestData),"videoRowData"in g&&t(0,l=g.videoRowData)},i.$$.update=()=>{i.$$.dirty&3&&l&&!Array.isArray(l)&&s&&l.videos&&l.videos.length&&h()},[l,s,r,o,h,n,m]}class Xt extends W{constructor(e){super(),Y(this,e,Xn,Zn,J,{requestData:5,videoRowData:0})}}function bt(i,e,t){const n=i.slice();return n[2]=e[t],n}function vt(i){let e,t;return e=new Xt({props:{requestData:i[2]}}),{c(){F(e.$$.fragment)},m(n,l){z(e,n,l),t=!0},p(n,l){const s={};l&2&&(s.requestData=n[2]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function $n(i){let e,t,n,l=$(i[1]),s=[];for(let o=0;o<l.length;o+=1)s[o]=vt(bt(i,l,o));const r=o=>V(s[o],1,1,()=>{s[o]=null});return{c(){e=p("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class",t=i[0]?"":"hidden")},m(o,f){U(o,e,f);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);n=!0},p(o,[f]){if(f&2){l=$(o[1]);let c;for(c=0;c<l.length;c+=1){const a=bt(o,l,c);s[c]?(s[c].p(a,f),C(s[c],1)):(s[c]=vt(a),s[c].c(),C(s[c],1),s[c].m(e,null))}for(ie(),c=l.length;c<s.length;c+=1)r(c);le()}(!n||f&1&&t!==(t=o[0]?"":"hidden"))&&u(e,"class",t)},i(o){if(!n){for(let f=0;f<l.length;f+=1)C(s[f]);n=!0}},o(o){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)V(s[f]);n=!1},d(o){o&&M(e),me(s,o)}}}function ei(i,e,t){let n;ze(i,xt,s=>t(1,n=s));let{visibility:l}=e;return i.$$set=s=>{"visibility"in s&&t(0,l=s.visibility)},[l,n]}class ti extends W{constructor(e){super(),Y(this,e,ei,$n,J,{visibility:0})}}function ni(i){let e,t,n;return{c(){e=G("svg"),t=G("g"),n=G("path"),u(n,"d","m20.87 20.17-5.59-5.59C16.35 13.35 17 11.75 17 10c0-3.87-3.13-7-7-7s-7 3.13-7 7 3.13 7 7 7c1.75 0 3.35-.65 4.58-1.71l5.59 5.59.7-.71zM10 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"),u(t,"class","fill-current"),u(e,"version","1.1"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),u(e,"x","0px"),u(e,"y","0px"),u(e,"viewBox","0 0 24 24"),u(e,"preserveAspectRatio","xMidYMid meet"),u(e,"focusable","false"),A(e,"pointer-events","none"),A(e,"display","block"),A(e,"width","100%"),A(e,"height","100%")},m(l,s){U(l,e,s),d(e,t),d(t,n)},p:N,i:N,o:N,d(l){l&&M(e)}}}class ii extends W{constructor(e){super(),Y(this,e,null,ni,J,{})}}function yt(i,e,t){const n=i.slice();return n[18]=e[t],n}function wt(i,e,t){const n=i.slice();return n[21]=e[t],n}function kt(i){let e,t=$(i[3].suggestions),n=[];for(let l=0;l<t.length;l+=1)n[l]=St(wt(i,t,l));return{c(){e=p("ul");for(let l=0;l<n.length;l+=1)n[l].c();u(e,"class","dropdown-content menu z-10 p-2 shadow-xl bg-base-200 rounded-box")},m(l,s){U(l,e,s);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(l,s){if(s&136){t=$(l[3].suggestions);let r;for(r=0;r<t.length;r+=1){const o=wt(l,t,r);n[r]?n[r].p(o,s):(n[r]=St(o),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(l){l&&M(e),me(n,l)}}}function St(i){let e,t,n=i[21]+"",l,s,r;return{c(){e=p("li"),t=p("button"),l=H(),u(t,"type","button"),u(e,"class","p-1")},m(o,f){U(o,e,f),d(e,t),t.innerHTML=n,d(e,l),s||(r=E(t,"click",i[12]),s=!0)},p(o,f){f&8&&n!==(n=o[21]+"")&&(t.innerHTML=n)},d(o){o&&M(e),s=!1,r()}}}function Tt(i){let e;return{c(){e=p("div"),e.innerHTML='<span class="loading loading-spinner loading-md"></span>',u(e,"class","fixed w-full h-1/2 z-50 flex justify-center items-center")},m(t,n){U(t,e,n)},d(t){t&&M(e)}}}function Lt(i){let e,t;const n=[i[18]];let l={};for(let s=0;s<n.length;s+=1)l=qe(l,n[s]);return e=new Zt({props:l}),{c(){F(e.$$.fragment)},m(s,r){z(e,s,r),t=!0},p(s,r){const o=r&16?De(n,[Fe(s[18])]):{};e.$set(o)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Ct(i){let e,t,n=i[18].type==="video"&&Lt(i);return{c(){n&&n.c(),e=he()},m(l,s){n&&n.m(l,s),U(l,e,s),t=!0},p(l,s){l[18].type==="video"?n?(n.p(l,s),s&16&&C(n,1)):(n=Lt(l),n.c(),C(n,1),n.m(e.parentNode,e)):n&&(ie(),V(n,1,1,()=>{n=null}),le())},i(l){t||(C(n),t=!0)},o(l){V(n),t=!1},d(l){l&&M(e),n&&n.d(l)}}}function li(i){let e,t,n,l,s,r,o,f,c,a,h,m,g,_,y,b,k,j;c=new ii({});let S=i[3].suggestions.length>0&&kt(i),L=i[5]&&Tt(),v=$(i[4]),P=[];for(let w=0;w<v.length;w+=1)P[w]=Ct(yt(i,v,w));const I=w=>V(P[w],1,1,()=>{P[w]=null});return{c(){e=p("div"),t=p("div"),n=p("form"),l=p("div"),s=p("input"),r=H(),o=p("button"),f=p("div"),F(c.$$.fragment),a=H(),S&&S.c(),h=H(),m=p("div"),L&&L.c(),g=H(),_=p("div");for(let w=0;w<P.length;w+=1)P[w].c();u(s,"type","search"),u(s,"dir","auto"),u(s,"placeholder","Search..."),u(s,"class","join-item input w-full border border-neutral rounded-full"),u(f,"class","h-6"),u(o,"class","join-item btn"),u(l,"class","join w-full border border-neutral rounded-full"),u(t,"class","m-4"),u(_,"class","grid grid-flow-row-dense gap-4 items-center justify-center sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 m-4"),u(e,"class",y=i[0]?"":"hidden")},m(w,R){U(w,e,R),d(e,t),d(t,n),d(n,l),d(l,s),i[9](s),ae(s,i[2]),d(l,r),d(l,o),d(o,f),z(c,f,null),d(n,a),S&&S.m(n,null),d(e,h),d(e,m),L&&L.m(m,null),d(m,g),d(m,_);for(let q=0;q<P.length;q+=1)P[q]&&P[q].m(_,null);b=!0,k||(j=[E(s,"input",i[10]),E(s,"input",i[6]),E(s,"focus",i[6]),E(s,"blur",i[11]),E(o,"click",i[8]),E(n,"submit",i[13])],k=!0)},p(w,[R]){if(R&4&&s.value!==w[2]&&ae(s,w[2]),w[3].suggestions.length>0?S?S.p(w,R):(S=kt(w),S.c(),S.m(n,null)):S&&(S.d(1),S=null),w[5]?L||(L=Tt(),L.c(),L.m(m,g)):L&&(L.d(1),L=null),R&16){v=$(w[4]);let q;for(q=0;q<v.length;q+=1){const ce=yt(w,v,q);P[q]?(P[q].p(ce,R),C(P[q],1)):(P[q]=Ct(ce),P[q].c(),C(P[q],1),P[q].m(_,null))}for(ie(),q=v.length;q<P.length;q+=1)I(q);le()}(!b||R&1&&y!==(y=w[0]?"":"hidden"))&&u(e,"class",y)},i(w){if(!b){C(c.$$.fragment,w);for(let R=0;R<v.length;R+=1)C(P[R]);b=!0}},o(w){V(c.$$.fragment,w),P=P.filter(Boolean);for(let R=0;R<P.length;R+=1)V(P[R]);b=!1},d(w){w&&M(e),i[9](null),D(c),S&&S.d(),L&&L.d(),me(P,w),k=!1,oe(j)}}}function si(i,e,t){let{visibility:n}=e,l=new Xe,s,r="",o={suggestions:[]},f=[],c=[],a=!1;_e.subscribe(v=>{var P,I;l.instance=(P=v==null?void 0:v.invidious)==null?void 0:P.current_instance,l.userCountryCode=((I=v==null?void 0:v.device)==null?void 0:I.user_country_code)??"US"}),Be.subscribe(v=>{c=v});async function h(v){const P=v.currentTarget.value;let I;P.length===0?I={suggestions:[],query:""}:I=await l.searchSuggestions(P),document.activeElement===s&&r===I.query&&t(3,o=m(I))}function m(v,P=10){const w=[...g(r),...v.suggestions];return{suggestions:[...new Set(w)].slice(0,P),query:v.query}}function g(v){return v.length===0?c:c.filter(P=>P.startsWith(v))}async function _(v){t(2,r=v),await y()}async function y(){if(t(3,o={suggestions:[]}),t(4,f=[]),r.length===0)return;try{t(5,a=!0),t(4,f=await l.search(r))}finally{t(5,a=!1)}const v=await X.putSearchHistory(r);Be.set(v)}function b(v){de[v?"unshift":"push"](()=>{s=v,t(1,s)})}function k(){r=this.value,t(2,r)}const j=()=>{setTimeout(()=>{t(3,o={suggestions:[]})},200)},S=async v=>{await _(v.currentTarget.innerText)},L=async v=>{v.preventDefault(),await y()};return i.$$set=v=>{"visibility"in v&&t(0,n=v.visibility)},[n,s,r,o,f,a,h,_,y,b,k,j,S,L]}class ri extends W{constructor(e){super(),Y(this,e,si,li,J,{visibility:0})}}function Pt(i,e,t){const n=i.slice();return n[7]=e[t],n}function It(i){let e,t=i[7].name+"",n,l,s;return{c(){e=p("option"),n=O(t),e.disabled=l=!i[7].enabled,e.__value=s=i[7].name,ae(e,e.__value)},m(r,o){U(r,e,o),d(e,n)},p(r,o){o&2&&t!==(t=r[7].name+"")&&K(n,t),o&2&&l!==(l=!r[7].enabled)&&(e.disabled=l),o&2&&s!==(s=r[7].name)&&(e.__value=s,ae(e,e.__value))},d(r){r&&M(e)}}}function oi(i){let e,t,n,l,s,r,o,f,c,a,h,m,g,_,y=$(i[1]),b=[];for(let k=0;k<y.length;k+=1)b[k]=It(Pt(i,y,k));return{c(){e=p("div"),e.innerHTML=`<div class="text-2xl">Developer settings</div> <div class="text-xs text-gray-500">Options for Playlet developers. Do not change unless you &quot;know what you&#39;re
    doing&quot;™</div>`,t=H(),n=p("div"),l=p("div"),l.textContent="Playlet Library version",s=H(),r=p("div"),r.textContent=`The version of Playlet Lib to use. These correspond to tagged releases on
    Github. Releases that do not have a playlet-lib.zip file are disabled.`,o=H(),f=p("div"),c=p("select"),a=p("option"),a.textContent="latest (default)";for(let k=0;k<b.length;k+=1)b[k].c();h=H(),m=p("button"),m.textContent="Apply",u(e,"class","m-5"),u(l,"class","text-lg"),u(r,"class","text-xs text-gray-500"),a.selected=!0,a.__value="",ae(a,a.__value),u(c,"class","select select-bordered join-item w-full mr-1"),i[0]===void 0&&Ae(()=>i[3].call(c)),u(m,"class","join-item btn"),u(f,"class","join w-full m-1"),u(n,"class","m-5")},m(k,j){U(k,e,j),U(k,t,j),U(k,n,j),d(n,l),d(n,s),d(n,r),d(n,o),d(n,f),d(f,c),d(c,a);for(let S=0;S<b.length;S+=1)b[S]&&b[S].m(c,null);nt(c,i[0],!0),d(f,h),d(f,m),g||(_=[E(c,"change",i[3]),E(m,"click",i[2])],g=!0)},p(k,[j]){if(j&2){y=$(k[1]);let S;for(S=0;S<y.length;S+=1){const L=Pt(k,y,S);b[S]?b[S].p(L,j):(b[S]=It(L),b[S].c(),b[S].m(c,null))}for(;S<b.length;S+=1)b[S].d(1);b.length=y.length}j&3&&nt(c,k[0])},i:N,o:N,d(k){k&&(M(e),M(t),M(n)),me(b,k),g=!1,oe(_)}}}async function ci(){return(await(await fetch("https://api.github.com/repos/iBicha/playlet/releases")).json()).map(t=>({name:t.tag_name,enabled:t.assets.filter(n=>n.name==="playlet-lib.zip").length>0}))}function fi(i,e,t){let n="",l=[],s,r;Me(async()=>{t(1,l=await ci()),o()}),_e.subscribe(a=>{var h,m;s=(h=a==null?void 0:a.app)==null?void 0:h.lib_url,r=(m=a==null?void 0:a.app)==null?void 0:m.lib_url_type,o()});function o(){if(r==="custom"&&l.length!==0)for(let a=0;a<l.length;a++){const h=l[a].name;if(s===`https://github.com/iBicha/playlet/releases/download/${h}/playlet-lib.zip`){t(0,n=h);break}}}async function f(){let a=n;a===""&&(a="latest"),confirm(`Are you sure you want to change the Playlet Library version to "${a}"?`)&&(await X.setPlayletLibVersion(n),alert("Playlet Library version set. Restart playlet to apply changes."))}function c(){n=fn(this),t(0,n),t(1,l)}return[n,l,f,c]}class ui extends W{constructor(e){super(),Y(this,e,fi,oi,J,{})}}function ai(i){let e,t,n,l,s,r,o,f,c,a,h,m;return{c(){e=p("div"),t=p("label"),n=p("div"),l=O(i[0]),r=H(),o=p("input"),f=H(),c=p("div"),a=O(i[2]),u(n,"class",s="label-text "+i[5][i[3]]),u(o,"type","checkbox"),u(o,"name",i[1]),u(o,"class","checkbox"),u(t,"class","label p-0 cursor-pointer"),u(c,"class","text-xs text-gray-500"),u(e,"class","form-control m-5")},m(g,_){U(g,e,_),d(e,t),d(t,n),d(n,l),d(t,r),d(t,o),o.checked=i[4],d(e,f),d(e,c),d(c,a),h||(m=[E(o,"change",i[7]),E(o,"change",i[6])],h=!0)},p(g,[_]){_&1&&K(l,g[0]),_&8&&s!==(s="label-text "+g[5][g[3]])&&u(n,"class",s),_&2&&u(o,"name",g[1]),_&16&&(o.checked=g[4]),_&4&&K(a,g[2])},i:N,o:N,d(g){g&&M(e),h=!1,oe(m)}}}function di(i,e,t){const n=["text-2xl","text-lg","text-base","text-sm","text-xs"];let{displayText:l=""}=e,{key:s=""}=e,{description:r=""}=e,{level:o=0}=e,f;Je.subscribe(h=>{t(4,f=h[s])});async function c(){s!==""&&await X.saveUserPreference(s,f)}function a(){f=this.checked,t(4,f)}return i.$$set=h=>{"displayText"in h&&t(0,l=h.displayText),"key"in h&&t(1,s=h.key),"description"in h&&t(2,r=h.description),"level"in h&&t(3,o=h.level)},[l,s,r,o,f,n,c,a]}class hi extends W{constructor(e){super(),Y(this,e,di,ai,J,{displayText:0,key:1,description:2,level:3})}}function mi(i){let e,t,n,l,s,r,o,f,c,a,h;return{c(){e=p("div"),t=p("div"),n=O(i[0]),s=H(),r=p("div"),o=O(i[1]),f=H(),c=p("button"),c.textContent="Clear search history",u(t,"class",l=i[3][i[2]]),u(r,"class","text-xs text-gray-500"),u(c,"class","btn m-1"),u(e,"class","m-5")},m(m,g){U(m,e,g),d(e,t),d(t,n),d(e,s),d(e,r),d(r,o),d(e,f),d(e,c),a||(h=E(c,"click",i[4]),a=!0)},p(m,[g]){g&1&&K(n,m[0]),g&4&&l!==(l=m[3][m[2]])&&u(t,"class",l),g&2&&K(o,m[1])},i:N,o:N,d(m){m&&M(e),a=!1,h()}}}function gi(i,e,t){const n=["text-2xl","text-lg","text-base","text-sm","text-xs"];let{displayText:l=""}=e,{key:s=""}=e,{description:r=""}=e,{level:o=0}=e;async function f(){await X.clearSearchHistory(),Be.set([]),alert("Search history cleared.")}return i.$$set=c=>{"displayText"in c&&t(0,l=c.displayText),"key"in c&&t(5,s=c.key),"description"in c&&t(1,r=c.description),"level"in c&&t(2,o=c.level)},[l,r,o,n,f,s]}class pi extends W{constructor(e){super(),Y(this,e,gi,mi,J,{displayText:0,key:5,description:1,level:2})}}function Ht(i,e,t){const n=i.slice();return n[8]=e[t],n}function Mt(i){let e,t,n,l=i[8].displayText+"",s,r,o,f,c,a,h,m;return{c(){e=p("div"),t=p("label"),n=p("span"),s=O(l),r=H(),o=p("input"),a=H(),u(n,"class","label-text"),u(o,"type","radio"),u(o,"name",i[1]),o.value=f=i[8].value,u(o,"class","radio"),o.checked=c=i[5]===i[8].value,u(t,"class","label cursor-pointer"),u(e,"class","form-control")},m(g,_){U(g,e,_),d(e,t),d(t,n),d(n,s),d(t,r),d(t,o),d(e,a),h||(m=E(o,"change",i[7]),h=!0)},p(g,_){_&16&&l!==(l=g[8].displayText+"")&&K(s,l),_&2&&u(o,"name",g[1]),_&16&&f!==(f=g[8].value)&&(o.value=f),_&48&&c!==(c=g[5]===g[8].value)&&(o.checked=c)},d(g){g&&M(e),h=!1,m()}}}function _i(i){let e,t,n,l,s,r,o,f,c=$(i[4]),a=[];for(let h=0;h<c.length;h+=1)a[h]=Mt(Ht(i,c,h));return{c(){e=p("div"),t=p("div"),n=O(i[0]),s=H(),r=p("div"),o=O(i[2]),f=H();for(let h=0;h<a.length;h+=1)a[h].c();u(t,"class",l=i[6][i[3]]),u(r,"class","text-xs text-gray-500"),u(e,"class","m-5")},m(h,m){U(h,e,m),d(e,t),d(t,n),d(e,s),d(e,r),d(r,o),d(e,f);for(let g=0;g<a.length;g+=1)a[g]&&a[g].m(e,null)},p(h,[m]){if(m&1&&K(n,h[0]),m&8&&l!==(l=h[6][h[3]])&&u(t,"class",l),m&4&&K(o,h[2]),m&178){c=$(h[4]);let g;for(g=0;g<c.length;g+=1){const _=Ht(h,c,g);a[g]?a[g].p(_,m):(a[g]=Mt(_),a[g].c(),a[g].m(e,null))}for(;g<a.length;g+=1)a[g].d(1);a.length=c.length}},i:N,o:N,d(h){h&&M(e),me(a,h)}}}function bi(i,e,t){const n=["text-2xl","text-lg","text-base","text-sm","text-xs"];let{displayText:l=""}=e,{key:s=""}=e,{description:r=""}=e,{level:o=0}=e,{options:f=[]}=e,c;Je.subscribe(h=>{t(5,c=h[s])});async function a(h){s!==""&&(t(5,c=h.currentTarget.value),await X.saveUserPreference(s,c))}return i.$$set=h=>{"displayText"in h&&t(0,l=h.displayText),"key"in h&&t(1,s=h.key),"description"in h&&t(2,r=h.description),"level"in h&&t(3,o=h.level),"options"in h&&t(4,f=h.options)},[l,s,r,o,f,c,n,a]}class vi extends W{constructor(e){super(),Y(this,e,bi,_i,J,{displayText:0,key:1,description:2,level:3,options:4})}}function Ut(i){let e,t,n;return{c(){e=p("button"),e.textContent="Save",u(e,"class","join-item btn")},m(l,s){U(l,e,s),t||(n=E(e,"click",i[7]),t=!0)},p:N,d(l){l&&M(e),t=!1,n()}}}function yi(i){let e,t,n,l,s,r,o,f,c,a,h,m,g,_=i[4]!==i[5]&&Ut(i);return{c(){e=p("div"),t=p("div"),n=O(i[0]),s=H(),r=p("div"),o=O(i[2]),f=H(),c=p("div"),a=p("input"),h=H(),_&&_.c(),u(t,"class",l=i[6][i[3]]),u(r,"class","text-xs text-gray-500"),u(a,"type","text"),u(a,"name",i[1]),u(a,"placeholder",i[0]),u(a,"class","join-item input w-full mr-1"),u(c,"class","join w-full m-1"),u(e,"class","m-5")},m(y,b){U(y,e,b),d(e,t),d(t,n),d(e,s),d(e,r),d(r,o),d(e,f),d(e,c),d(c,a),ae(a,i[4]),d(c,h),_&&_.m(c,null),m||(g=E(a,"input",i[8]),m=!0)},p(y,[b]){b&1&&K(n,y[0]),b&8&&l!==(l=y[6][y[3]])&&u(t,"class",l),b&4&&K(o,y[2]),b&2&&u(a,"name",y[1]),b&1&&u(a,"placeholder",y[0]),b&16&&a.value!==y[4]&&ae(a,y[4]),y[4]!==y[5]?_?_.p(y,b):(_=Ut(y),_.c(),_.m(c,null)):_&&(_.d(1),_=null)},i:N,o:N,d(y){y&&M(e),_&&_.d(),m=!1,g()}}}function wi(i,e,t){const n=["text-2xl","text-lg","text-base","text-sm","text-xs"];let{displayText:l=""}=e,{key:s=""}=e,{description:r=""}=e,{level:o=0}=e,f,c;Je.subscribe(m=>{t(5,c=m[s]),t(4,f=c)});async function a(){if(s!==""){const m=f;await X.saveUserPreference(s,m),t(5,c=t(4,f=m))}}function h(){f=this.value,t(4,f)}return i.$$set=m=>{"displayText"in m&&t(0,l=m.displayText),"key"in m&&t(1,s=m.key),"description"in m&&t(2,r=m.description),"level"in m&&t(3,o=m.level)},[l,s,r,o,f,c,n,a,h]}class ki extends W{constructor(e){super(),Y(this,e,wi,yi,J,{displayText:0,key:1,description:2,level:3})}}function jt(i,e,t){const n=i.slice();return n[13]=e[t],n}function Vt(i){let e,t,n,l,s;const r=[Pi,Ci,Li,Ti,Si],o=[];function f(a,h){return a[3]==="boolean"?0:a[3]==="radio"?1:a[3]==="string"?2:a[4]?3:4}e=f(i),t=o[e]=r[e](i);let c=i[7]&&Rt(i);return{c(){t.c(),n=H(),c&&c.c(),l=he()},m(a,h){o[e].m(a,h),U(a,n,h),c&&c.m(a,h),U(a,l,h),s=!0},p(a,h){let m=e;e=f(a),e===m?o[e].p(a,h):(ie(),V(o[m],1,1,()=>{o[m]=null}),le(),t=o[e],t?t.p(a,h):(t=o[e]=r[e](a),t.c()),C(t,1),t.m(n.parentNode,n)),a[7]?c?(c.p(a,h),h&128&&C(c,1)):(c=Rt(a),c.c(),C(c,1),c.m(l.parentNode,l)):c&&(ie(),V(c,1,1,()=>{c=null}),le())},i(a){s||(C(t),C(c),s=!0)},o(a){V(t),V(c),s=!1},d(a){a&&(M(n),M(l)),o[e].d(a),c&&c.d(a)}}}function Si(i){let e,t,n,l,s,r,o;return{c(){e=p("div"),t=p("div"),n=O(i[0]),s=H(),r=p("div"),o=O(i[2]),u(t,"class",l=i[9][i[8]]),u(r,"class","text-xs text-gray-500"),u(e,"class","m-5")},m(f,c){U(f,e,c),d(e,t),d(t,n),d(e,s),d(e,r),d(r,o)},p(f,c){c&1&&K(n,f[0]),c&256&&l!==(l=f[9][f[8]])&&u(t,"class",l),c&4&&K(o,f[2])},i:N,o:N,d(f){f&&M(e)}}}function Ti(i){let e,t,n;var l=i[10][i[4]];function s(r){return{props:{displayText:r[0],key:r[1],description:r[2],level:r[8]}}}return l&&(e=it(l,s(i))),{c(){e&&F(e.$$.fragment),t=he()},m(r,o){e&&z(e,r,o),U(r,t,o),n=!0},p(r,o){const f={};if(o&1&&(f.displayText=r[0]),o&2&&(f.key=r[1]),o&4&&(f.description=r[2]),o&256&&(f.level=r[8]),o&16&&l!==(l=r[10][r[4]])){if(e){ie();const c=e;V(c.$$.fragment,1,0,()=>{D(c,1)}),le()}l?(e=it(l,s(r)),F(e.$$.fragment),C(e.$$.fragment,1),z(e,t.parentNode,t)):e=null}else l&&e.$set(f)},i(r){n||(e&&C(e.$$.fragment,r),n=!0)},o(r){e&&V(e.$$.fragment,r),n=!1},d(r){r&&M(t),e&&D(e,r)}}}function Li(i){let e,t;return e=new ki({props:{displayText:i[0],key:i[1],description:i[2],level:i[8]}}),{c(){F(e.$$.fragment)},m(n,l){z(e,n,l),t=!0},p(n,l){const s={};l&1&&(s.displayText=n[0]),l&2&&(s.key=n[1]),l&4&&(s.description=n[2]),l&256&&(s.level=n[8]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ci(i){let e,t;return e=new vi({props:{displayText:i[0],key:i[1],description:i[2],level:i[8],options:i[5]}}),{c(){F(e.$$.fragment)},m(n,l){z(e,n,l),t=!0},p(n,l){const s={};l&1&&(s.displayText=n[0]),l&2&&(s.key=n[1]),l&4&&(s.description=n[2]),l&256&&(s.level=n[8]),l&32&&(s.options=n[5]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Pi(i){let e,t;return e=new hi({props:{displayText:i[0],key:i[1],description:i[2],level:i[8]}}),{c(){F(e.$$.fragment)},m(n,l){z(e,n,l),t=!0},p(n,l){const s={};l&1&&(s.displayText=n[0]),l&2&&(s.key=n[1]),l&4&&(s.description=n[2]),l&256&&(s.level=n[8]),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Rt(i){let e,t,n=$(i[7]),l=[];for(let r=0;r<n.length;r+=1)l[r]=Nt(jt(i,n,r));const s=r=>V(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=he()},m(r,o){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(r,o);U(r,e,o),t=!0},p(r,o){if(o&384){n=$(r[7]);let f;for(f=0;f<n.length;f+=1){const c=jt(r,n,f);l[f]?(l[f].p(c,o),C(l[f],1)):(l[f]=Nt(c),l[f].c(),C(l[f],1),l[f].m(e.parentNode,e))}for(ie(),f=n.length;f<l.length;f+=1)s(f);le()}},i(r){if(!t){for(let o=0;o<n.length;o+=1)C(l[o]);t=!0}},o(r){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)V(l[o]);t=!1},d(r){r&&M(e),me(l,r)}}}function Nt(i){let e,t;const n=[i[13],{level:i[8]+1}];let l={};for(let s=0;s<n.length;s+=1)l=qe(l,n[s]);return e=new $t({props:l}),{c(){F(e.$$.fragment)},m(s,r){z(e,s,r),t=!0},p(s,r){const o=r&384?De(n,[r&128&&Fe(s[13]),r&256&&{level:s[8]+1}]):{};e.$set(o)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Ii(i){let e,t,n=i[6]!=="tv"&&Vt(i);return{c(){n&&n.c(),e=he()},m(l,s){n&&n.m(l,s),U(l,e,s),t=!0},p(l,[s]){l[6]!=="tv"?n?(n.p(l,s),s&64&&C(n,1)):(n=Vt(l),n.c(),C(n,1),n.m(e.parentNode,e)):n&&(ie(),V(n,1,1,()=>{n=null}),le())},i(l){t||(C(n),t=!0)},o(l){V(n),t=!1},d(l){l&&M(e),n&&n.d(l)}}}function Hi(i,e,t){const n=["text-2xl","text-lg","text-base","text-sm","text-xs"];let{displayText:l=""}=e,{key:s=""}=e,{description:r=""}=e,{type:o=void 0}=e,{svelteComponent:f=void 0}=e,{options:c=void 0}=e,{visibility:a=void 0}=e,{children:h=[]}=e,{level:m=0}=e,{defaultValue:g=void 0}=e,{rokuComponent:_=void 0}=e;const y={ClearSearchHistoryControl:pi};return i.$$set=b=>{"displayText"in b&&t(0,l=b.displayText),"key"in b&&t(1,s=b.key),"description"in b&&t(2,r=b.description),"type"in b&&t(3,o=b.type),"svelteComponent"in b&&t(4,f=b.svelteComponent),"options"in b&&t(5,c=b.options),"visibility"in b&&t(6,a=b.visibility),"children"in b&&t(7,h=b.children),"level"in b&&t(8,m=b.level),"defaultValue"in b&&t(11,g=b.defaultValue),"rokuComponent"in b&&t(12,_=b.rokuComponent)},[l,s,r,o,f,c,a,h,m,n,y,g,_]}class $t extends W{constructor(e){super(),Y(this,e,Hi,Ii,J,{displayText:0,key:1,description:2,type:3,svelteComponent:4,options:5,visibility:6,children:7,level:8,defaultValue:11,rokuComponent:12})}}function At(i,e,t){const n=i.slice();return n[3]=e[t],n[5]=t,n}function Et(i){let e,t,n,l;const s=[i[3]];let r={};for(let f=0;f<s.length;f+=1)r=qe(r,s[f]);e=new $t({props:r});let o=i[5]!==i[2].length-1&&Ot();return{c(){F(e.$$.fragment),t=H(),o&&o.c(),n=he()},m(f,c){z(e,f,c),U(f,t,c),o&&o.m(f,c),U(f,n,c),l=!0},p(f,c){const a=c&4?De(s,[Fe(f[3])]):{};e.$set(a),f[5]!==f[2].length-1?o||(o=Ot(),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i(f){l||(C(e.$$.fragment,f),l=!0)},o(f){V(e.$$.fragment,f),l=!1},d(f){f&&(M(t),M(n)),D(e,f),o&&o.d(f)}}}function Ot(i){let e;return{c(){e=p("div"),u(e,"class","divider")},m(t,n){U(t,e,n)},d(t){t&&M(e)}}}function Bt(i){let e,t,n=i[3].visibility!=="tv"&&Et(i);return{c(){n&&n.c(),e=he()},m(l,s){n&&n.m(l,s),U(l,e,s),t=!0},p(l,s){l[3].visibility!=="tv"?n?(n.p(l,s),s&4&&C(n,1)):(n=Et(l),n.c(),C(n,1),n.m(e.parentNode,e)):n&&(ie(),V(n,1,1,()=>{n=null}),le())},i(l){t||(C(n),t=!0)},o(l){V(n),t=!1},d(l){l&&M(e),n&&n.d(l)}}}function qt(i){let e,t,n,l;return n=new ui({}),{c(){e=p("div"),t=H(),F(n.$$.fragment),u(e,"class","divider")},m(s,r){U(s,e,r),U(s,t,r),z(n,s,r),l=!0},i(s){l||(C(n.$$.fragment,s),l=!0)},o(s){V(n.$$.fragment,s),l=!1},d(s){s&&(M(e),M(t)),D(n,s)}}}function Mi(i){let e,t,n,l,s=$(i[2]),r=[];for(let c=0;c<s.length;c+=1)r[c]=Bt(At(i,s,c));const o=c=>V(r[c],1,1,()=>{r[c]=null});let f=i[1]&&qt();return{c(){e=p("div");for(let c=0;c<r.length;c+=1)r[c].c();t=H(),f&&f.c(),u(e,"class",n=i[0]?"":"hidden")},m(c,a){U(c,e,a);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(e,null);d(e,t),f&&f.m(e,null),l=!0},p(c,[a]){if(a&4){s=$(c[2]);let h;for(h=0;h<s.length;h+=1){const m=At(c,s,h);r[h]?(r[h].p(m,a),C(r[h],1)):(r[h]=Bt(m),r[h].c(),C(r[h],1),r[h].m(e,t))}for(ie(),h=s.length;h<r.length;h+=1)o(h);le()}c[1]?f?a&2&&C(f,1):(f=qt(),f.c(),C(f,1),f.m(e,null)):f&&(ie(),V(f,1,1,()=>{f=null}),le()),(!l||a&1&&n!==(n=c[0]?"":"hidden"))&&u(e,"class",n)},i(c){if(!l){for(let a=0;a<s.length;a+=1)C(r[a]);C(f),l=!0}},o(c){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)V(r[a]);V(f),l=!1},d(c){c&&M(e),me(r,c),f&&f.d()}}}function Ui(i,e,t){let n;ze(i,Gt,r=>t(2,n=r));let{visibility:l}=e,s=!1;return Me(async()=>{const r=new URLSearchParams(window.location.search);t(1,s=!!r.get("dev"))}),i.$$set=r=>{"visibility"in r&&t(0,l=r.visibility)},[l,s,n]}class ji extends W{constructor(e){super(),Y(this,e,Ui,Mi,J,{visibility:0})}}function zt(i,e,t){const n=i.slice();return n[12]=e[t][0],n[13]=e[t][1],n}function Dt(i){let e,t,n,l,s=Ft(i[12],i[1][i[12]])+"",r;return{c(){e=p("tr"),t=p("td"),t.textContent=`${i[13]}`,n=H(),l=p("td"),r=H()},m(o,f){U(o,e,f),d(e,t),d(e,n),d(e,l),l.innerHTML=s,d(e,r)},p(o,f){f&2&&s!==(s=Ft(o[12],o[1][o[12]])+"")&&(l.innerHTML=s)},d(o){o&&M(e)}}}function Vi(i){let e,t,n,l,s,r,o,f,c,a,h,m,g,_,y,b,k,j,S=$(Object.entries(i[4])),L=[];for(let v=0;v<S.length;v+=1)L[v]=Dt(zt(i,S,v));return{c(){e=p("div"),t=p("div"),n=O("Thank you for using Playlet."),l=p("br"),s=O(` You have feedback? Let us know by
    `),r=p("a"),o=O("creating an issue on Github"),f=O(`
    or by
    `),c=p("a"),a=O("sending an email"),h=O("."),m=H(),g=p("div"),_=p("table"),y=p("thead"),y.innerHTML="<tr><th>Key</th> <th>Value</th></tr>",b=H(),k=p("tbody");for(let v=0;v<L.length;v+=1)L[v].c();u(r,"class","link"),u(r,"href",i[2]),u(r,"target","_blank"),u(r,"rel","noopener noreferrer"),u(c,"class","link"),u(c,"href",i[3]),u(c,"target","_blank"),u(c,"rel","noopener noreferrer"),u(t,"class","text-base text-center m-8"),u(_,"class","table"),u(g,"class","overflow-x-auto"),u(e,"class",j=i[0]?"":"hidden")},m(v,P){U(v,e,P),d(e,t),d(t,n),d(t,l),d(t,s),d(t,r),d(r,o),d(t,f),d(t,c),d(c,a),d(t,h),d(e,m),d(e,g),d(g,_),d(_,y),d(_,b),d(_,k);for(let I=0;I<L.length;I+=1)L[I]&&L[I].m(k,null)},p(v,[P]){if(P&4&&u(r,"href",v[2]),P&8&&u(c,"href",v[3]),P&18){S=$(Object.entries(v[4]));let I;for(I=0;I<S.length;I+=1){const w=zt(v,S,I);L[I]?L[I].p(w,P):(L[I]=Dt(w),L[I].c(),L[I].m(k,null))}for(;I<L.length;I+=1)L[I].d(1);L.length=S.length}P&1&&j!==(j=v[0]?"":"hidden")&&u(e,"class",j)},i:N,o:N,d(v){v&&M(e),me(L,v)}}}function Ft(i,e){switch(i){case"version":case"lib_version":case"lib_version_latest":return`<a class="link" href="https://github.com/iBicha/playlet/releases/tag/v${e}" target="_blank" rel="noopener noreferrer">${e}</a>`;case"lib_url":return`<a class="link" href="${e}" target="_blank" rel="noopener noreferrer">${e}</a>`;case"git_commit_hash":case"lib_git_commit_hash":return e==="unknown"?e:`<a class="link" href="https://github.com/iBicha/playlet/commit/${e}" target="_blank" rel="noopener noreferrer">${e}</a>`}return e}function Ri(i,e,t){let{visibility:n}=e;const l={version:"Playlet Version",lib_version:"Playlet Library Version",lib_version_latest:"Playlet Library Latest Version",lib_url:"Playlet Library URL",lib_url_type:"Playlet Library URL Type",git_commit_hash:"Playlet Git Commit Hash",lib_git_commit_hash:"Playlet Library Git Commit Hash",id:"App ID"};let s={},r={},o={},f={};const c=encodeURIComponent("[Feedback] Playlet");let a="https://github.com/iBicha/playlet/issues/new",h="mailto:brahim.hadriche@gmail.com";_e.subscribe(y=>{t(1,s=y.app||{}),r=y.device||{},o=y.invidious||{},f=y.preferences||{},t(2,a=g()),t(3,h=_())});function m(){return`### Feedback
_insert feedback here_

#### App Info
\`\`\`
${JSON.stringify(s,null,2)}
\`\`\`

#### Device Info
\`\`\`
${JSON.stringify(r,null,2)}
\`\`\`

#### Invidious settings
\`\`\`
${JSON.stringify(o,null,2)}
\`\`\`

#### User preferences
\`\`\`
${JSON.stringify(f,null,2)}
\`\`\``}function g(){const y=encodeURIComponent(m());return`https://github.com/iBicha/playlet/issues/new?title=${c}&body=${y}`}function _(){const y=encodeURIComponent(m());return`mailto:brahim.hadriche@gmail.com?subject=${c}&body=${y}`}return i.$$set=y=>{"visibility"in y&&t(0,n=y.visibility)},[n,s,a,h,l]}class Ni extends W{constructor(e){super(),Y(this,e,Ri,Vi,J,{visibility:0})}}function Ai(i){let e;return{c(){e=p("span"),u(e,"class","loading loading-spinner loading-md")},m(t,n){U(t,e,n)},d(t){t&&M(e)}}}function Ei(i){let e;return{c(){e=p("div"),e.textContent="Drop a Youtube link here",u(e,"class","text-2xl font-bold")},m(t,n){U(t,e,n)},d(t){t&&M(e)}}}function Oi(i){var ye,ge;let e,t,n,l,s,r,o=((ye=i[5])==null?void 0:ye.title)+"",f,c,a,h,m,g,_,y,b,k,j,S,L,v,P,I,w,R,q;function ce(B,ee){if(B[1])return Ei;if(B[2])return Ai}let x=ce(i),ne=x&&x(i);function ve(B){i[9](B)}function ke(B){i[10](B)}let fe={lengthSeconds:(ge=i[5])==null?void 0:ge.lengthSeconds};return i[3]!==void 0&&(fe.checked=i[3]),i[4]!==void 0&&(fe.timestamp=i[4]),h=new Qt({props:fe}),de.push(()=>Oe(h,"checked",ve)),de.push(()=>Oe(h,"timestamp",ke)),{c(){e=p("div"),ne&&ne.c(),n=H(),l=p("dialog"),s=p("form"),r=p("h3"),f=O(o),c=H(),a=p("div"),F(h.$$.fragment),_=H(),y=p("button"),b=O("Play on "),k=O(i[6]),j=H(),S=p("button"),S.textContent="Open in Invidious",L=H(),v=p("button"),v.textContent="Cancel",P=H(),I=p("form"),I.innerHTML="<button>close</button>",u(e,"class",t=(i[1]||i[2]?"":"hidden")+" fixed w-full h-full bg-base-100/80 z-50 flex justify-center items-center"),u(r,"class","text-lg m-5"),u(y,"class","btn m-2"),u(S,"class","btn m-2"),u(v,"class","btn m-2"),u(a,"class","flex flex-col"),u(s,"method","dialog"),u(s,"class","modal-box bg-base-100"),u(I,"method","dialog"),u(I,"class","modal-backdrop"),u(l,"id","modal_video_drag_drop"),u(l,"class","modal")},m(B,ee){U(B,e,ee),ne&&ne.m(e,null),U(B,n,ee),U(B,l,ee),d(l,s),d(s,r),d(r,f),d(s,c),d(s,a),z(h,a,null),d(a,_),d(a,y),d(y,b),d(y,k),d(a,j),d(a,S),d(a,L),d(a,v),d(l,P),d(l,I),i[11](l),w=!0,R||(q=[E(y,"click",i[7]),E(S,"click",i[8])],R=!0)},p(B,[ee]){var Q,ue;x!==(x=ce(B))&&(ne&&ne.d(1),ne=x&&x(B),ne&&(ne.c(),ne.m(e,null))),(!w||ee&6&&t!==(t=(B[1]||B[2]?"":"hidden")+" fixed w-full h-full bg-base-100/80 z-50 flex justify-center items-center"))&&u(e,"class",t),(!w||ee&32)&&o!==(o=((Q=B[5])==null?void 0:Q.title)+"")&&K(f,o);const T={};ee&32&&(T.lengthSeconds=(ue=B[5])==null?void 0:ue.lengthSeconds),!m&&ee&8&&(m=!0,T.checked=B[3],Ee(()=>m=!1)),!g&&ee&16&&(g=!0,T.timestamp=B[4],Ee(()=>g=!1)),h.$set(T),(!w||ee&64)&&K(k,B[6])},i(B){w||(C(h.$$.fragment,B),w=!0)},o(B){V(h.$$.fragment,B),w=!1},d(B){B&&(M(e),M(n),M(l)),ne&&ne.d(),D(h),i[11](null),R=!1,oe(q)}}}function Bi(i){let e;try{e=new URL(i)}catch{return!1}return e.protocol==="http:"||e.protocol==="https:"}function qi(i){const e=new URLSearchParams(new URL(i).search);function t(){const o=e.get("t");if(o)return o.endsWith("s")?o.slice(0,-1):o}const n=["https://youtu.be/","http://youtu.be/","https://www.youtu.be/","http://www.youtu.be/","https://youtube.com/shorts/","http://youtube.com/shorts/","https://www.youtube.com/shorts/","http://www.youtube.com/shorts/"];for(var l in n){let o=n[l];if(i.startsWith(o)){let f=i.replace(o,"");f.includes("?")&&(f=f.substring(0,f.indexOf("?")));const c={videoId:f},a=t();return a&&(c.timestamp=a),c}}const s={videoId:e.get("v")},r=t();return r&&(s.timestamp=r),s}function zi(i,e,t){let n,l,s,r,o,f,c,a="Roku TV",h,m=new Xe;_e.subscribe(v=>{var P,I;t(6,a=((P=v==null?void 0:v.device)==null?void 0:P.friendly_name)??"Roku TV"),m.instance=h=(I=v==null?void 0:v.invidious)==null?void 0:I.current_instance}),Me(async()=>{document.body.addEventListener("drop",g),document.body.addEventListener("dragover",y)}),un(()=>{document.body.removeEventListener("drop",g),document.body.removeEventListener("dragover",y)});async function g(v){v.preventDefault(),n.close(),t(1,l=!1);for(var P in v.dataTransfer.items){let I=v.dataTransfer.items[P];if(I.kind==="string"&&I.getAsString){let w=await new Promise(R=>I.getAsString(R));if(Bi(w)){const R=qi(w);if(R.videoId){_(R.videoId,R.timestamp);return}}}}}async function _(v,P){try{t(2,s=!0),t(5,c=await m.getVideoMetadata(v)),t(3,o=P!==void 0),o&&t(4,f=P),n.showModal()}finally{t(2,s=!1)}}function y(v){n.close(),clearTimeout(r),r=setTimeout(()=>{t(1,l=!1)},200),t(1,l=!0),v.preventDefault()}async function b(){await X.playVideo(c==null?void 0:c.videoId,f)}function k(){let v=`${h}/watch?v=${c==null?void 0:c.videoId}`;o&&f&&(v+=`&t=${f}`),window.open(v)}function j(v){o=v,t(3,o)}function S(v){f=v,t(4,f)}function L(v){de[v?"unshift":"push"](()=>{n=v,t(0,n)})}return[n,l,s,o,f,c,a,b,k,j,S,L]}class Di extends W{constructor(e){super(),Y(this,e,zi,Oi,J,{})}}function Fi(i){let e,t,n,l,s,r,o,f,c,a,h,m,g,_,y,b;return t=new Di({}),l=new Pn({}),o=new ri({props:{visibility:i[0]=="search"}}),c=new ti({props:{visibility:i[0]=="home"}}),h=new ji({props:{visibility:i[0]=="settings"}}),g=new Ni({props:{visibility:i[0]=="info"}}),y=new On({}),{c(){e=p("main"),F(t.$$.fragment),n=H(),F(l.$$.fragment),s=H(),r=p("div"),F(o.$$.fragment),f=H(),F(c.$$.fragment),a=H(),F(h.$$.fragment),m=H(),F(g.$$.fragment),_=H(),F(y.$$.fragment),A(r,"margin-bottom","4rem")},m(k,j){U(k,e,j),z(t,e,null),d(e,n),z(l,e,null),d(e,s),d(e,r),z(o,r,null),d(r,f),z(c,r,null),d(r,a),z(h,r,null),d(r,m),z(g,r,null),d(e,_),z(y,e,null),b=!0},p(k,[j]){const S={};j&1&&(S.visibility=k[0]=="search"),o.$set(S);const L={};j&1&&(L.visibility=k[0]=="home"),c.$set(L);const v={};j&1&&(v.visibility=k[0]=="settings"),h.$set(v);const P={};j&1&&(P.visibility=k[0]=="info"),g.$set(P)},i(k){b||(C(t.$$.fragment,k),C(l.$$.fragment,k),C(o.$$.fragment,k),C(c.$$.fragment,k),C(h.$$.fragment,k),C(g.$$.fragment,k),C(y.$$.fragment,k),b=!0)},o(k){V(t.$$.fragment,k),V(l.$$.fragment,k),V(o.$$.fragment,k),V(c.$$.fragment,k),V(h.$$.fragment,k),V(g.$$.fragment,k),V(y.$$.fragment,k),b=!1},d(k){k&&M(e),D(t),D(l),D(o),D(c),D(h),D(g),D(y)}}}function Ji(i,e,t){Me(async()=>{X.getState().then(l=>{_e.set(l)}),X.getHomeLayoutFile().then(l=>{xt.set(l)}),X.getInvidiousVideoApiFile().then(l=>{const s=l.endpoints.reduce((r,o)=>(r[o.name]=o,r),{});Kt.set(s)}),X.getPreferencesFile().then(l=>{Gt.set(l)}),X.getUserPreferences().then(l=>{Je.set(l)}),X.getSearchHistory().then(l=>{Be.set(l)})});let n;return Qe.subscribe(l=>{t(0,n=l.screen)}),[n]}class Yi extends W{constructor(e){super(),Y(this,e,Ji,Fi,J,{})}}new Yi({target:document.getElementById("app")});
